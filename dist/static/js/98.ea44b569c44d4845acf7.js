webpackJsonp([98],{1027:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["pageState","tableData","tabHeight","type"],data:function(){return{inboxcdData:[],disabled:!0}},mounted:function(){},methods:{showRoute:function(e,t){this.$emit("editRoute",e,t)},showHandle:function(e,t){this.$emit("show",e,t)},showDelete:function(e,t){this.$emit("delete",e,t)},showEdit:function(e,t,a){this.$emit("show",e,t,a)},ischeckbox:function(e){if(this.inboxcdData=[],e.length)for(var t=0;t<e.length;t++)this.inboxcdData.push(e[t].inboxcd);this.$emit("getcheckbox",this.inboxcdData)}}}},1063:function(e,t,a){var n=a(1)(a(1027),a(1071),null,null,null);e.exports=n.exports},1071:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"percent-table"},[a("el-table",{staticClass:"adjust-table ui-color4",attrs:{"highlight-current-row":"",data:e.tableData,height:e.tabHeight},on:{"select-all":e.ischeckbox,select:e.ischeckbox}},[e._e(),e._v(" "),"announceEdit"!==e.pageState?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"status",align:"center",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"消息类型",prop:"type",align:"center",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"标题",prop:"title",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"消息内容",prop:"content",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{disabled:e.disabled,trigger:"hover",placement:"top",effect:"dark"}},[a("el-tag",{staticClass:"custom-tag"},[e._v(e._s(t.row.content))])],1)]}}])}),e._v(" "),"remind"==e.pageState?a("el-table-column",{attrs:{label:"消息级别",prop:"level",align:"center",width:"80"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"发布人",prop:"publisher",align:"center",width:"120"}}),e._v(" "),"announce"==e.pageState||"announceEdit"==e.pageState?a("el-table-column",{attrs:{label:"发布时间",prop:"publishtime",align:"center",width:"150"}}):e._e(),e._v(" "),"remind"==e.pageState||"task"==e.pageState?a("el-table-column",{attrs:{label:"接收时间",prop:"receivetime",align:"center",width:"150"}}):e._e(),e._v(" "),"task"==e.pageState?a("el-table-column",{attrs:{label:" ",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showRoute(t.$index,e.tableData)}}},[e._v("查看")])]}}])}):e._e(),e._v(" "),"remind"==e.pageState||"announce"==e.pageState?a("el-table-column",{attrs:{label:" ",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showRoute(t.$index,e.tableData)}}},[e._v("查看")])]}}])}):e._e(),e._v(" "),"announceEdit"===e.pageState?a("el-table-column",{attrs:{label:" ",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showRoute(t.$index,e.tableData)}}},[e._v("发布")]),e._v(" "),a("span",{staticClass:"color-2"},[e._v("|")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showEdit("edit",t.$index,e.tableData)}}},[e._v("编辑")]),e._v(" "),a("span",{staticClass:"color-2"},[e._v("|")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.showDelete(t.$index,e.tableData)}}},[e._v("删除")])]}}])}):e._e()],1)],1)},staticRenderFns:[]}},1139:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=a(87),i=a.n(s),l=a(42),o=a.n(l),r=a(966),c=a.n(r),u=a(1063),d=a.n(u);t.default={components:{ZLCommonTable:c.a,ZLMessageTable:d.a},data:function(){var e=this;return{tabHeight:500,pageState:"announceEdit",defaultProps:{label:function(e,t){return e.treeObject.orgname},children:"children"},defaProps:{label:function(e,t){return e.treeObject.itemname},children:"children"},search:null,filterText:null,filterType:null,number:0,activeName:"first",clientTop:"50px",dialog_top:"50px",sendurl:"",apiUrl:"/message/dic/getAll",dateI:e.recentDate("now"),typeVisibleI:!1,isdate:!0,dialogVisible:!1,releaseVisible:!1,sendrange:null,dialogType:"add",sendboxid:null,sendboxidiI:null,announcementType:null,announcementForm:{title:null,pushtime:null,pushmode:1,sendmode:0,content:null,type:null,publisher:this.$store.getters.getUserinfo.fullname,publishtime:e.recentDate("now"),remindermode:"",status:null,attachment:null},rules:{announcementType:[{required:!0,message:"请选择消息类型",trigger:"blur"}]},addFormVisible:!1,itemValues:[{name:"status",label:"状态",width:"60",type:"normal"},{name:"type",label:"消息类型",width:"",type:"normal"},{name:"title",label:"标题",width:"",type:"normal"},{name:"content",label:"消息内容",width:"",type:"normal"},{name:"publisher",label:"发布人",width:70,type:"normal"},{name:"publishtime",label:"发布时间",width:"",type:"normal"},{type:"isbutton",label:"操作",width:180,buttons:[{name:"editRoute",label:"发布"},{name:"edit",label:"编辑"},{name:"delete",label:"删除"}]}],moduleList:[],receiveData:[],checkList:[],detailsuserData:[],sendrangeAilsUser:[],sendboxUserAilu:[],roleData:[],userData:[],usersData:[],ailsData:[],toggailsData:[],typeList:[],userList:[],items:[]}},mounted:function(){this.init()},computed:{searchData:function(){var e=this.search;return e?this.roleData.filter(function(t){return o()(t).some(function(a){return String(t[a]).indexOf(e)>-1})}):this.roleData}},watch:{filterText:function(e){this.$refs.usertree.filter(e)},filterType:function(e){this.$refs.salestree.filter(e)},$route:function(){this.init(),this.setStorage()}},methods:(n={init:function(){this.onContractChange(),this.getailsuser(),this.setStorage(),this.getlist()},jungleHeight:function(){"low"===this.$store.state.resolution&&(this.tabHeight=470)},getlist:function(){var e=this,t=this,a=[];this.fetch("/message/sendbox/allByPage",{sendbox:{pageNo:this.cPage,pageSize:this.cSize,status:1}}).then(function(n){a=n.data.list;for(var s in a)for(var i in e.items)a[s].type===e.items[i].itemkey&&(a[s].type=e.items[i].itemname);for(var l in a)1===a[l].status?a[l].status="未发布":2===a[l].status?a[l].status="已发布":3===a[l].status&&(a[l].status="删除");for(var o=0;o<a.length;o++)a[o].content=e.removeHTMLTag(a[o].content);t.receiveData=a,e.number=n.data.total,e.cTotal=n.data.total})},save:function(e){var t=this;"add"===this.dialogType?(this.checkList.length&&(this.announcementForm.remindermode=this.checkList.join(",")),1===this.announcementForm.pushmode?this.announcementForm.pushtime=null:2===this.announcementForm.pushmode&&(this.announcementForm.pushtime=this.dateI),this.announcementForm.status=1,this.fetch("/message/sendbox/add",{sendbox:this.announcementForm,sendboxDetails:this.detailsuserData}).then(function(e){200===e.status?(t.sendboxidiI=e.data,t.$message({message:e.message,type:"success"})):500===e.status?t.$message({message:e.message,type:"error"}):1002===e.status?t.$message({message:e.message,type:"error"}):t.$message({message:"保存失败",type:"error"})})):(this.dialogType="edit")&&(this.checkList.length&&(this.announcementForm.remindermode=this.checkList.join(",")),1===this.announcementForm.pushmode?this.announcementForm.pushtime=null:2===this.announcementForm.pushmode&&(this.announcementForm.pushtime=this.dateI),this.announcementForm.status=1,this.fetch("/message/sendbox/edit/"+this.sendboxid,{sendbox:this.announcementForm,sendboxDetails:this.detailsuserData}).then(function(e){200===e.status?t.$message({message:e.message,type:"success"}):500===e.status?t.$message({message:e.message,type:"error"}):1002===e.status?t.$message({message:e.message,type:"error"}):t.$message({message:"保存失败",type:"error"})}))},show_dialog:function(e,t,a){"add"===e?this.dialogType="add":"edit"===e&&(this.dialogType="edit",this.sendboxid=a[t].sendboxcd,this.getsendboxid(a[t].sendboxcd),this.announcementType=a[t].type)},delrow:function(e,t){var a=this;this.deleteAjax("/message/sendbox/del/"+t[e].sendboxcd).then(function(e){200===e.status?(a.$message({message:e.message,type:"success"}),a.getlist()):500===e.status&&(a.$message({message:e.message,type:"error"}),a.getlist())})},getsendboxid:function(e){var t=this,a=this;this.getAjax("/message/sendbox/get/"+e).then(function(e){if(t.announcementForm=e.data.sendbox,t.checkList=e.data.sendbox.remindermode.split(","),t.sendboxUserAilu=e.data.sendboxDetails,t.detailsuserData=e.data.sendboxDetails,1===e.data.sendboxDetails.length)null===e.data.sendboxDetails[0].fullname?a.sendrange=e.data.sendboxDetails[0].rolename:a.sendrange=e.data.sendboxDetails[0].fullname;else{a.sendrangeAilsUser=[];for(var n=0;n<e.data.sendboxDetails.length;n++)null===e.data.sendboxDetails[n].fullname?a.sendrangeAilsUser.push(e.data.sendboxDetails[n].rolename):a.sendrangeAilsUser.push(e.data.sendboxDetails[n].fullname);a.sendrange=a.sendrangeAilsUser.join(",")}setTimeout(function(){e.data.sendbox.pushtime?t.dateI=e.data.sendbox.pushtime:t.dateI=e.data.sendbox.publishtime},200)}),this.releaseVisible=!1},show_add:function(){this.typeVisibleI=!0,this.announcementType=null,this.announcementForm.type=null,this.getListtype()},getListtype:function(){var e=this;this.fetch("message/dic/getList",{iscache:1}).then(function(t){e.typeList=t.data})},gettypeid:function(e){this.announcementType=e.treeObject.itemname,this.announcementForm.type=e.treeObject.itemkey},closeDialog:function(){this.typeVisibleI=!1,this.announcementType=null,this.announcementForm.type=null},getuserailu:function(){for(var e=this,t=[],a=[],n=0;n<this.sendboxUserAilu.length;n++)1===e.sendboxUserAilu.length?(t=_.filter(e.userData,{account:e.sendboxUserAilu[n].account}),a=_.filter(e.roleData,{alias:e.sendboxUserAilu[n].rolealias})):(e.usersData.push(_.filter(e.userData,{account:e.sendboxUserAilu[n].account})[0]),e.ailsData.push(_.filter(e.roleData,{alias:e.sendboxUserAilu[n].rolealias})[0]));if(1===t.length&&void 0!=t[0])e.$refs.userData.toggleRowSelection(t[0],!0);else if(void 0!=e.usersData[0])for(var s=0;s<e.usersData.length;s++)e.$refs.userData.toggleRowSelection(e.usersData[s]);if(1===a.length&&void 0!=a[0])e.$refs.roleData.toggleRowSelection(a[0]);else if(void 0!=e.ailsData[0])for(var i=0;i<e.ailsData.length;i++)e.$refs.roleData.toggleRowSelection(e.ailsData[i])},editRoute:function(e,t){var a=this,n=null;n=this.sendboxidiI?this.sendboxidiI:t[e].sendboxcd,this.fetch("/message/sendbox/send/"+n,{}).then(function(e){200===e.status?(a.sendboxidiI=null,a.$message({message:e.message,type:"success"}),a.getlist()):500===e.status&&(a.$message({message:e.message,type:"error"}),a.getlist())})},doUpload:function(e){var t=this,a=e.target.files[0],n=new FormData;n.append("file",a,a.name),n.append("chunk","0"),console.log(n.get("file"));var s={headers:{"Content-Type":"multipart/form-data"}},i=n.get("file").name;this.fetch("/message/file/upload?fileDir="+i,n,s).then(function(e){t.announcementForm.attachment=e.data.fileName})},clearForm:function(){this.dialogType="add",this.checkList=[],this.announcementForm={title:null,pushtime:null,pushmode:1,sendmode:0,content:null,type:null,publisher:this.$store.getters.getUserinfo.fullname,publishtime:this.recentDate("now"),remindermode:"",status:null}},empuser:function(){var e=this;this.dialogVisible=!0,setTimeout(function(){e.getuserailu()},200)},getailsuser:function(){var e=this,t=this;this.fetch("/sys/role/getAll",this.objfilter({pageNo:this.cPage,pageSize:1e4})).then(function(t){"200"==t.status&&(e.roleData=t.data.list)}),this.fetch("/message/infotemplate/orgUser",{}).then(function(e){200===e.status&&(t.moduleList=e.data)})},receiveSelect:function(e){this.detailsuserData=[],this.sendrangeAilsUser=[];for(var t=0;t<e.length;t++)this.detailsuserData.push({rolename:e[t].rolename,rolealias:e[t].alias,usertype:null,account:null,fullname:null}),this.sendrangeAilsUser.push(this.detailsuserData[t].rolename)},getChange:function(e,t){var a=this;if(this.userList=[],this.sendrangeAilsUser=[],t)if(e.children);else{a.userList.push(e.treeObject);for(var n=0;n<a.userList.length;n++)a.userList[n].account&&a.detailsuserData.push({rolename:null,rolealias:null,usertype:a.userList[n].usertype,account:a.userList[n].account,fullname:a.userList[n].orgname});a.detailsuserData=a.reduceObj(a.detailsuserData,"account")}else a.detailsuserData=_.reject(a.detailsuserData,{account:e.treeObject.account});for(var s=0;s<this.detailsuserData.length;s++)this.sendrangeAilsUser.push(this.detailsuserData[s].fullname)},datestring:function(e){this.dateI=e},onContractChange:function(){var e=this;this.fetch(this.apiUrl,{}).then(function(t){e.items=t.data.list})},reverted:function(){this.sendrange=this.sendrangeAilsUser.join(","),this.dialogVisible=!1},handleClick:function(e,t){this.sendrangeAilsUser=[],this.detailsuserData=[],this.getailsuser()},changeAccpet:function(e){1===e?(this.dateI=this.recentDate("now"),this.isdate=!0):2===e&&(this.dateI=null,this.isdate=!1)},unpublished:function(){this.releaseVisible=!0,this.getlist()},preview:function(){this.editRoute()},filterNode:function(e,t){return!e||-1!==t.treeObject.orgname.indexOf(e)},TypeNode:function(e,t){return!e||-1!==t.treeObject.itemname.indexOf(e)},setStorage:function(){var e=this.$route.params.type;void 0===this.$route.params.type&&(e=sessionStorage.getItem("AnnounmMission")),setTimeout(function(){sessionStorage.setItem("AnnounmMission",e)},200)}},i()(n,"clearForm",function(){this.announcementForm={title:null,pushtime:null,pushmode:1,sendmode:0,content:null,type:null,publisher:this.$store.getters.getUserinfo.fullname,publishtime:this.recentDate("now"),remindermode:"",status:null},this.checkList=[],this.announcementType=null,this.sendrange=null}),i()(n,"cancel",function(){"annou"===sessionStorage.getItem("AnnounmMission")?this.$routeTo("mc_announcement"):"task"===sessionStorage.getItem("AnnounmMission")?this.$routeTo("mc_task_message"):this.$routeTo("mc_announcement"),this.clearForm()}),n)}},1389:function(e,t,a){t=e.exports=a(656)(!0),t.push([e.i,".line .el-col-1[data-v-f6c7cce0]{width:4.16667%;text-align:center}.margin-bot[data-v-f6c7cce0]{margin-bottom:86px}@media screen and (max-width:1500px){.margin-bot[data-v-f6c7cce0]{margin-bottom:73px}}.margin-botI[data-v-f6c7cce0]{margin-bottom:250px}.eliminate[data-v-f6c7cce0]{position:relative;top:-35px;z-index:9999}.contract-project[data-v-f6c7cce0]{display:flex}.contract-project .c-div[data-v-f6c7cce0]{flex:1}.contract-project .p-div[data-v-f6c7cce0]{flex:1.5}.el-card+.el-card[data-v-f6c7cce0]{margin-top:0;margin-left:20px}.Height[data-v-f6c7cce0]{height:320px}@media screen and (max-width:1400px){.Height[data-v-f6c7cce0]{height:220px}}","",{version:3,sources:["F:/pc_project/erp-aluminium/yunerp/src/page/erp_pc/erp_mc/announcement_edit.vue"],names:[],mappings:"AACA,iCACE,eAAgB,AAChB,iBAAmB,CACpB,AACD,6BACE,kBAAoB,CACrB,AACD,qCACA,6BACI,kBAAoB,CACvB,CACA,AACD,8BACE,mBAAqB,CACtB,AACD,4BACE,kBAAmB,AACnB,UAAW,AACX,YAAc,CACf,AACD,mCACE,YAAc,CACf,AACD,0CACE,MAAQ,CACT,AACD,0CACE,QAAU,CACX,AACD,mCACE,aAAc,AACd,gBAAkB,CACnB,AACD,yBACE,YAAc,CACf,AACD,qCACA,yBACI,YAAc,CACjB,CACA",file:"announcement_edit.vue",sourcesContent:["\n.line .el-col-1[data-v-f6c7cce0] {\n  width: 4.16667%;\n  text-align: center;\n}\n.margin-bot[data-v-f6c7cce0] {\n  margin-bottom: 86px;\n}\n@media screen and (max-width: 1500px) {\n.margin-bot[data-v-f6c7cce0] {\n    margin-bottom: 73px;\n}\n}\n.margin-botI[data-v-f6c7cce0] {\n  margin-bottom: 250px;\n}\n.eliminate[data-v-f6c7cce0] {\n  position: relative;\n  top: -35px;\n  z-index: 9999;\n}\n.contract-project[data-v-f6c7cce0] {\n  display: flex;\n}\n.contract-project .c-div[data-v-f6c7cce0] {\n  flex: 1;\n}\n.contract-project .p-div[data-v-f6c7cce0] {\n  flex: 1.5;\n}\n.el-card + .el-card[data-v-f6c7cce0] {\n  margin-top: 0;\n  margin-left: 20px;\n}\n.Height[data-v-f6c7cce0] {\n  height: 320px;\n}\n@media screen and (max-width: 1400px) {\n.Height[data-v-f6c7cce0] {\n    height: 220px;\n}\n}\n"],sourceRoot:""}])},1520:function(e,t,a){var n=a(1389);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(657)("1321c5aa",n,!0,{})},1737:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-secondnav page-commonnav"},[a("div",{staticClass:"f-content"},[a("div",{staticClass:"console-mt3"},[a("el-button",{staticClass:"ui-color3",on:{click:function(t){e.save("announcementForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{staticClass:"ui-color3",on:{click:e.preview}},[e._v("发布")]),e._v(" "),a("el-button",{staticClass:"ui-color3",on:{click:e.unpublished}},[e._v("未发布:("+e._s(e.number)+")条")]),e._v(" "),a("el-button",{staticClass:"ui-color2",on:{click:e.cancel}},[e._v("关闭")])],1),e._v(" "),a("el-form",{ref:"announcementForm",staticClass:"console-pt5 inputWidthI",attrs:{rules:e.rules,inline:!0,model:e.announcementForm,"label-width":"80px",enctype:"mutipart/form-data",method:"post"}},[a("el-form-item",{attrs:{label:"消息类型",prop:"announcementType"}},[a("el-input",{attrs:{readonly:!0},model:{value:e.announcementType,callback:function(t){e.announcementType="string"==typeof t?t.trim():t},expression:"announcementType"}},[a("el-button",{attrs:{slot:"append"},on:{click:e.show_add},slot:"append"},[a("i",{staticClass:"el-icon-more"})])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.announcementForm.title,callback:function(t){e.$set(e.announcementForm,"title",t)},expression:"announcementForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发布人"}},[a("el-input",{attrs:{readonly:!0},model:{value:e.announcementForm.publisher,callback:function(t){e.$set(e.announcementForm,"publisher",t)},expression:"announcementForm.publisher"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发布时间"}},[a("el-date-picker",{attrs:{disabled:!0,align:"right",type:"datetime",format:"yyyy-MM-dd HH:mm:ss",placeholder:"发布时间"},model:{value:e.announcementForm.publishtime,callback:function(t){e.$set(e.announcementForm,"publishtime",t)},expression:"announcementForm.publishtime"}})],1)],1),e._v(" "),a("el-form",{ref:"announcementForm",staticClass:"inputWidthIII",attrs:{model:e.announcementForm,"label-width":"80px"}},[a("el-form-item",{staticClass:"margin-botI",attrs:{label:"内容"}},[a("el-input",{attrs:{placeholder:"请输入内容",rows:10,type:"textarea"},model:{value:e.announcementForm.content,callback:function(t){e.$set(e.announcementForm,"content",t)},expression:"announcementForm.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"附件"}},[a("input",{staticStyle:{width:"20%"},attrs:{type:"file",name:"file"},on:{change:e.doUpload}})]),e._v(" "),a("el-form-item",{staticClass:"margin-bot",attrs:{label:"发送范围"}},[a("el-input",{attrs:{placeholder:"请选择角色或者人员",resize:"none",rows:4,type:"textarea",readonly:!0},on:{focus:e.empuser},model:{value:e.sendrange,callback:function(t){e.sendrange=t},expression:"sendrange"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推送时间"}},[a("el-radio-group",{on:{change:e.changeAccpet},model:{value:e.announcementForm.pushmode,callback:function(t){e.$set(e.announcementForm,"pushmode",t)},expression:"announcementForm.pushmode"}},[a("el-radio",{attrs:{label:1}},[e._v("立即推送")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("定时推送")])],1)],1),e._v(" "),a("el-form-item",{staticClass:"line"},[a("el-col",{attrs:{span:6}},[a("el-date-picker",{staticClass:"console-width-12",attrs:{type:"datetime",placeholder:"选择日期",format:"yyyy-MM-dd HH:mm:ss",disabled:e.isdate},on:{change:e.datestring},model:{value:e.dateI,callback:function(t){e.dateI=t},expression:"dateI"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"提醒方式"}},[a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("页面弹窗")]),e._v(" "),a("el-checkbox",{attrs:{label:"2"}},[e._v("APP")]),e._v(" "),a("el-checkbox",{attrs:{label:"3"}},[e._v("微信")]),e._v(" "),a("el-checkbox",{attrs:{label:"4"}},[e._v("邮件")])],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"dialogDiv dialogDivII",attrs:{top:e.clientTop,visible:e.typeVisibleI,"show-close":!1,size:"tiny",modal:!0}},[a("div",{staticClass:"slideContent"},[a("div",{staticClass:"leftDiv"},[a("el-button",{staticClass:"icon-setting-2 icon-close",on:{click:e.closeDialog}}),e._v(" "),a("el-button",{staticClass:"icon-setting-1 icon-confirm",on:{click:function(t){e.typeVisibleI=!1}}})],1),e._v(" "),a("div",{directives:[{name:"drag1",rawName:"v-drag1"}],staticClass:"slideTop"},[e._v("选择类型")]),e._v(" "),a("div",{staticClass:"slideMid"},[a("el-card",{staticClass:"del-shadow"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterType,callback:function(t){e.filterType=t},expression:"filterType"}}),e._v(" "),a("div",{staticClass:"scroll-tree saleHeight scrollBar console-mt3"},[a("el-tree",{ref:"salestree",staticClass:"render-tree",attrs:{data:e.typeList,accordion:!0,"default-expand-all":!1,props:e.defaProps,"highlight-current":!0,"check-strictly":!0,"filter-node-method":e.TypeNode},on:{"node-click":e.gettypeid}})],1)],1)],1)])]),e._v(" "),a("el-dialog",{staticClass:"dialogDiv dialogDivII",attrs:{"show-close":!1,visible:e.dialogVisible,top:e.dialog_top,size:"small"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"slideContent"},[a("div",{staticClass:"leftDiv leftOffsetIII"},[a("el-button",{staticClass:"icon-setting-2 icon-close",on:{click:function(t){e.dialogVisible=!1}}}),e._v(" "),a("el-button",{staticClass:"icon-setting-1 icon-confirm",on:{click:e.reverted}})],1),e._v(" "),a("div",{directives:[{name:"drag1",rawName:"v-drag1"}],staticClass:"slideTop"},[e._v("发送范围")]),e._v(" "),a("div",{staticClass:"slideMid"},[[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"人员列表",name:"first",disabled:!1}},[a("el-card",{staticClass:"del-shadow"},[a("div",{staticClass:"console-m2"},[a("el-input",{staticClass:"console-width-6",attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),e._v(" "),a("div",{staticClass:"scroll-treeI Height scrollBar newsNode"},[a("el-tree",{ref:"usertree",attrs:{"highlight-current":!0,data:e.moduleList,props:e.defaultProps,accordion:!0,"show-checkbox":"","filter-node-method":e.filterNode},on:{"check-change":e.getChange}})],1)])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"角色列表",name:"second"}},[a("el-card",{staticClass:"del-shadow"},[a("div",{staticClass:"console-m2"},[a("el-input",{staticClass:"console-width-6",attrs:{placeholder:"角色名称",icon:"search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),a("el-table",{ref:"roleData",staticClass:"th-center",attrs:{border:"","highlight-current-row":"",data:e.searchData,"max-height":"200"},on:{select:e.receiveSelect,"select-all":e.receiveSelect}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alias",label:"角色别名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.alias.replace(/(\S*)_/,"")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rolename",label:"角色名称",align:"center"}})],1)],1)],1)],1)]],2)])]),e._v(" "),a("el-dialog",{staticClass:"dialogDiv dialogDivII",attrs:{top:e.dialog_top,"show-close":!1,visible:e.releaseVisible,size:"small","close-on-click-modal":!1},on:{"update:visible":function(t){e.releaseVisible=t}}},[a("div",{staticClass:"slideContent"},[a("div",{staticClass:"leftDiv aloneDivI topDiv"},[a("el-button",{staticClass:"icon-setting-2 icon-close",on:{click:function(t){e.releaseVisible=!1}}})],1),e._v(" "),a("div",{directives:[{name:"drag1",rawName:"v-drag1"}],staticClass:"slideTop"},[e._v("未发布列表")]),e._v(" "),a("div",{staticClass:"slideMid"},[a("div",[a("el-form",{staticClass:"filterform inputColor",attrs:{"label-width":"80px",model:e.announcementForm}}),e._v(" "),a("ZLMessageTable",{ref:"ZLMessageTable",attrs:{tableData:e.receiveData,pageState:e.pageState,tabHeight:e.tabHeight},on:{editRoute:e.editRoute,show:e.show_dialog,delete:e.delrow}}),e._v(" "),a("el-pagination",{staticClass:"console-mt5",attrs:{"current-page":e.cPage,"page-sizes":e.cpageSizes,"page-size":e.cSize,layout:"total, sizes, prev, pager, next",total:e.cTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])])],1)])},staticRenderFns:[]}},717:function(e,t,a){function n(e){a(1520)}var s=a(1)(a(1139),a(1737),n,"data-v-f6c7cce0",null);e.exports=s.exports},923:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{tableData:Array,itemValues:Array,tabHeight:Number,isLoading:Boolean},data:function(){return{isbutton:!1,buttontype:null,arrValues:this.itemValues||[],inboxcdData:[],tagSearch:[],checkList:["0","1"]}},watch:{tableData:"getTableData"},mounted:function(){this.jungleHeight(),this.getHeight()},methods:{buttonClick:function(e,t,a){"edit"===e?this.$emit("show",e,t,a):"delete"===e?this.$emit("delete",t,a):"editRoute"===e?this.$emit("editRoute",t,a):"detail"===e?this.$emit("detail",t,a):console.log(e)},buttonClickI:function(e,t,a){"edit"===e?this.$emit("show",e,t,a):"delete"===e?this.$emit("delete",t,a):"editRoute"===e?this.$emit("editRoute",t,a):console.log(e)},checkChange:function(e){},getHeight:function(e){},filterTag:function(e,t){return t.clientname===e},getTableData:function(){var e=this;this.tagSearch=[];for(var t=0;t<this.tableData.length;t++)this.tagSearch.push({text:this.tableData[t].clientname,value:this.tableData[t].clientname});this.tagSearch=e.reduceObj(this.tagSearch,"text")},ischeckbox:function(e){if(this.inboxcdData=[],e.length)for(var t=0;t<e.length;t++)this.inboxcdData.push(e[t].inboxcd);this.$emit("getcheckbox",this.inboxcdData)},getIsbutton:function(){this.tableData},handleSelectionChange:function(e){console.log(e)},jungleHeight:function(){"high"===this.$store.state.resolution||this.$store.state.resolution},format:function(e,t,a){return this.formatDate(a,"ymdhM")}}}},966:function(e,t,a){var n=a(1)(a(923),a(968),null,null,null);e.exports=n.exports},968:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"percent-table"},["high"===e.$store.state.resolution?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"adjust-table ui-color4",attrs:{border:"","highlight-current-row":"",data:e.tableData,height:e.tabHeight},on:{select:e.ischeckbox,"select-all":e.ischeckbox}},[e._l(e.arrValues,function(t,n){return"select"===t.type?a("el-table-column",{key:n,attrs:{type:"selection",width:"35",align:"center"}}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"checkbox"===t.type?a("el-table-column",{key:n,attrs:{width:"55",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("el-checkbox",{attrs:{disabled:0!==n.$index},on:{change:function(a){e.checkChange(t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})]}}])}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"normal"===t.type?a("el-table-column",{key:n,attrs:{width:t.width,prop:t.name,label:t.label,formatter:t.formatter?e.format:null,align:"center",sortable:"",filters:t.tagFilter?e.tagSearch:null,"filter-method":t.tagFilter?e.filterTag:null}}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"hovernormal"===t.type?a("el-table-column",{key:n,attrs:{width:t.width,prop:t.name,label:t.label,formatter:t.formatter?e.format:null,align:"center",filters:t.tagFilter?e.tagSearch:null,"filter-method":t.tagFilter?e.filterTag:null},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{trigger:"hover",placement:"top",effect:"dark"}},[a("div",{staticClass:"name-wrapper",attrs:{slot:"content"},slot:"content"},[e._v("\n                        "+e._s(t.row.item)+"\n                    ")]),e._v(" "),a("el-tag",{staticClass:"custom-tag"},[e._v(e._s(t.row.item))])],1)]}}])}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"button"===t.type?a("el-table-column",{key:n,attrs:{width:t.width,label:t.label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(t.buttons,function(t){return e._t("default",[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.buttonClick(t.name,n.$index,e.tableData)}}},[e._v(e._s(t.label))])])})]}}])}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"isbutton"===t.type?a("el-table-column",{key:n,attrs:{width:t.width,label:t.label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(t.buttons,function(t){return e._t("default",[a("el-button",{attrs:{type:"text",disabled:e.isbutton},on:{click:function(a){e.buttonClickI(t.name,n.$index,e.tableData)}}},[e._v(e._s(t.label))])])})]}}])}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"choose"===t.type?a("el-table-column",{key:n,attrs:{width:t.width,label:t.label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._t("default",[a("el-checkbox-group",{model:{value:n.row.checkList,callback:function(t){e.$set(n.row,"checkList",t)},expression:"scope.row.checkList"}},e._l(t.chooses,function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.code}},[e._v(e._s(t.label))])}),1)])]}}])}):e._e()})],2):a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"ui-color4 adjust-table",attrs:{border:"","highlight-current-row":"",data:e.tableData,height:e.tabHeight},on:{"select-all":e.ischeckbox,select:e.ischeckbox}},[e._l(e.arrValues,function(t,n){return"select"===t.type?a("el-table-column",{key:n,attrs:{type:"selection",width:"35",align:"center"}}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"checkbox"===t.type?a("el-table-column",{key:n,attrs:{width:"55",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[a("el-checkbox",{attrs:{disabled:0!==n.$index},on:{change:function(a){e.checkChange(t.value)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}})]}}])}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"normal"===t.type?a("el-table-column",{key:n,attrs:{width:t.widthI,prop:t.name,label:t.label,formatter:t.formatter?e.format:null,align:"center",sortable:"",filters:t.tagFilter?e.tagSearch:null,"filter-method":t.tagFilter?e.filterTag:null}}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"button"===t.type?a("el-table-column",{key:n,attrs:{width:t.widthI,label:t.label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(t.buttons,function(t){return e._t("default",[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.buttonClick(t.name,n.$index,e.tableData)}}},[e._v(e._s(t.label))])])})]}}])}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"isbutton"===t.type?a("el-table-column",{key:n,attrs:{width:t.widthI,label:t.label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(t.buttons,function(t){return e._t("default",[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.buttonClick(t.name,n.$index,e.tableData)}}},[e._v(e._s(t.label))])])})]}}])}):e._e()}),e._v(" "),e._l(e.arrValues,function(t,n){return"choose"===t.type?a("el-table-column",{key:n,attrs:{width:t.widthI,label:t.label,align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(t.chooses,function(t){return e._t("default",[a("el-checkbox",[e._v(e._s(t.label))])])})]}}])}):e._e()})],2)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=98.ea44b569c44d4845acf7.js.map