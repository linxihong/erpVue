webpackJsonp([62],{1258:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(850),o=a.n(i),r=a(801),n=a.n(r),s=a(802),l=a.n(s),c=a(806),u=a.n(c),d=a(834),p=a.n(d);e.default={mixins:[o.a],components:{CommonSearch:n.a,CommonTable:l.a,CommonPagination:u.a,CommonDetailX:p.a},data:function(){return{mainHeight:716,isResize:!0,isShowStatus:{isMore:!1,isRead:!0,isPopUp:!1},returnStatusName:{0:"未提交",50:"已提交",100:"已审核",null:"未提交"},isShowChildMatCode:!0,currentIndex:0,clickTimes:0,editIndex:0,tableHeightI:.62*this.$store.state.screenHei,tableHeightII:150,otherVariable:{isSpread:!1,contentWidth:70,popupTitle:"",isInlineForm:!0,isEdit:!1,isChildEdit:!1,isHeadComplex:!0,isFormComplex:!0,loading:!1,$isCustom:!0},showTable:!1,tempWidth:null,tableData:[],showPrice:!1,showUnPrice:!1,searchProp:[{name:"装车单",prop:"refDocCode",type:"date",isMainSearch:!0,isMain:!1,placeholder:"请输入装车单号"},{name:"装车价格状态",prop:"tempStatus",type:"selectChange",selectList:[{value:0,label:"全部"},{value:1,label:"未提交"},{value:2,label:"已提交"},{value:3,label:"已审核"}],isMainSearch:!1,isMain:!1},{name:"下单日期",prop:"orderDocDateStart",type:"date",isMainSearch:!1,isMain:!1},{name:"至",prop:"orderDocDateEnd",type:"date",isMainSearch:!1,isMain:!1},{name:"销售公司",prop:"companyName",type:"normal",isMainSearch:!1,isMain:!1},{name:"供货公司",prop:"supplyCompanyName",type:"normal",isMainSearch:!1,isMain:!1}],formProp:[{name:"装车单号",prop:"refDocCode",type:"outter"},{name:"装车日期",prop:"docDate",type:"outter"},{name:"交货日期",prop:"deliveryDate",type:"outter"},{name:"单据状态",prop:"priceStatus",type:"outter",isStatus:!0},{name:"已审价",prop:"isCheckPrice",type:"outter",isCheck:!0},{name:"客户",prop:"clientCode",type:"inner"},{name:"经销商",prop:"clientCode2",type:"inner"},{name:"合同号",prop:"contractCode",type:"inner"},{name:"铝锭取价方式",prop:"alPriceMethodName",type:"inner"},{name:"铝锭价",prop:"alPrice",type:"inner"},{name:"销售公司",prop:"companyName",type:"inner"},{name:"取价日期",prop:"alPriceDate",type:"inner"},{name:"结算方式",prop:"settlementMethodName",type:"inner"},{name:"铝价日期",prop:"alPriceDate",type:"inner"},{name:"备注",prop:"remark",type:"inner",isLong:!0}],tableProp:[{name:"fid",prop:"fid",type:"normal",isMain:!0},{name1:"装车单号/",prop1:"refDocCode",name2:"状态",prop2:"priceStatus",type:"is_check_price",width:"130"},{name1:"流程单号/",prop1:"docCode",name2:"装车日期",prop2:"docDate",type:"mixin",width:"130"},{name1:"客户/",prop1:"clientCode",name2:"经销商",prop2:"clientCode2",type:"mixin",width:"100"},{name1:"送货地区/",prop1:"destination",name2:"提货方式",prop2:"loaderMethodName",type:"mixin"}],searchForm:{minPriceStatus:0,maxPriceStatus:50},detailForm:{},detailId:null,contractCode:null,docCode:null,pageObj:{commonPage:1,commonSize:10,commonSizes:[10,20,30,40,50,100],commonTotal:0},unitList:[],tabLeft:"100px",activeName:"first",tabDataI:[],copyDataI:[],loadingI:!1,isShowNotAllowed:!1,refMatPrice:null,refMatProcessPrice:null,tabPropIII:[{prop:"itemNo",name:"序号"},{prop:"priceItemText",name:"合同条款内容",type:"normal",width:"100"},{prop:"",name:"价格",children:[{prop:"otherPrice",name:"面积(元/m²)",type:"normal"},{prop:"price",name:"重量(元/kg)",type:"normal"}]},{prop:"",name:"价格组成",children:[{prop:"",name:"加工费"},{prop:"",name:"运算费"},{prop:"",name:"打托费"},{prop:"",name:"附加费"}]},{prop:"",name:"特批不收费",children:[{prop:"",name:"运输"},{prop:"",name:"打托"}]}],tabDataIII:[],batchTitle:"",batchVisible:!1,batchType:"",batchForm:{},contractList:[],contractVisible:!1,priceContract:""}},watch:{"otherVariable.isChildEdit":{handler:function(t){this.isShowNotAllowed=t}}},mounted:function(){this.getData(),this.getUnitList(),this.listenResizeIII(),this.changeSizeIII(),this.tempWidth=this.otherVariable.contentWidth,this.$refs.pricedetail.$el.oncontextmenu=function(){return!1}},methods:{getData:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.tableData=[],this.fetch("/oms/sls/LoaderDoc/getLoaderAndContractInfo?pageNo="+this.pageObj.commonPage+"&pageSize="+this.pageObj.commonSize,this.searchForm).then(function(a){a.data&&a.data.list?(t.tableData=a.data.list,t.pageObj.commonTotal=a.data.total,e?t.$nextTick(function(){t.$refs.commontable.renderRow(t.tableData[0].fid)}):t.$nextTick(function(){t.$refs.commontable.renderRow(t.detailId)})):t.pageObj.commonTotal=0})},selectChange:function(t){0===t?(this.searchForm.minPriceStatus=0,this.searchForm.maxPriceStatus=101):1===t?(this.searchForm.minPriceStatus=0,this.searchForm.maxPriceStatus=50):2===t?(this.searchForm.minPriceStatus=50,this.searchForm.maxPriceStatus=100):3===t&&(this.searchForm.minPriceStatus=100,this.searchForm.maxPriceStatus=100)},getSearchList:function(){this.pageObj.commonPage=1,this.pageObj.commonSize=10,this.getData()},handleReset:function(){this.searchForm={minPriceStatus:0,maxPriceStatus:50},this.handleRefresh()},handleRefresh:function(){this.getData(),this.otherVariable.isChildEdit=!1,this.tabDataI=[],this.showPrice=!1,this.showUnPrice=!1,this.detailForm={}},handleDetail:function(t){this.isShowNotAllowed=!0,this.loadingI=!0,0===t.priceStatus||null===t.priceStatus?(this.showPrice=!0,this.showUnPrice=!1):50===t.priceStatus?(this.showPrice=!1,this.showUnPrice=!0):(this.showPrice=!1,this.showUnPrice=!1),this.isShowStatus.isRead=!0,this.detailForm=t,this.showTable=!1,this.refMatPrice=t.alPrice,this.tabDataIII=[],this.contractCode=t.contractCode,this.detailId=t.fid,this.priceContract=t.contractCode,this.docCode=t.docCode,this.getDetailTable(t.fid)},getDetailTable:function(t){var e=this;this.tabDataI=[],this.copyDataI=[],this.priceIdsArray=[],this.otherVariable.isChildEdit=!1,this.isShowNotAllowed=!0,this.getAjax("/oms/sls/SalesLoaderPriceController/getLoaderPrice?loaderFlowId="+t+"&contractCode="+this.contractCode).then(function(t){e.loadingI=!1,e.isShowNotAllowed=!1,e.isShowNotAllowed=!1,200===t.status&&t.data?(e.tabDataI=t.data,e.copyDataI=e.$lodash.cloneDeep(e.tabDataI),t.data.forEach(function(t){t.alPrice=e.refMatPrice,e.priceIdsArray.push(t.priceId)})):(e.tabDataI=[],e.copyDataI=[])}).then(function(){e.loadingI=!1})},handlePrice:function(){var t=this;this.$confirm("是否提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=void 0;t.fetch("/oms/sls/SalesLoaderPriceController/submitPrice",{loaderFlowId:t.detailId,priceStatus:50,priceIdsArray:t.$lodash.compact(t.priceIdsArray)}).then(function(a){e=a.status,200===a.status?(t.$message({message:"操作成功",type:"success"}),0===t.searchForm.tempStatus?t.getData(!1):t.getData()):t.$message({message:t.returnErrorMsg(a.error),type:"error"})})})},handldUnPrice:function(){var t=this;this.$confirm("是否撤销?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=void 0;t.fetch("/oms/sls/SalesLoaderPriceController/submitPrice",{loaderFlowId:t.detailId,priceStatus:0,priceIdsArray:t.$lodash.compact(t.priceIdsArray)}).then(function(a){e=a.status,200===a.status?(t.$message({message:"操作成功",type:"success"}),0===t.searchForm.tempStatus?t.getData(!1):t.getData()):t.$message({message:t.returnErrorMsg(a.error),type:"error"})})})},clickDetail:function(t){1!==this.detailForm.isCheckPrice&&(this.showTable=!1,1!==t.isLocked&&!this.otherVariable.isReadTable&&this.showPrice&&(this.otherVariable.isChildEdit=!0,this.tabDataI=this.giveState(this.tabDataI),t.isEditState=!0),this.childDetailRow=t||{},this.clickTimes+=1,1===this.clickTimes&&(this.refMatProcessPrice=this.$lodash.cloneDeep(this.childDetailRow).pricePart1),this.editIndex=this.$lodash.findIndex(this.tabDataI,["priceId",t.priceId]),this.editIndex<0&&(this.editIndex=0))},handleSaveChild:function(){var t=this,e=void 0,a=this.childDetailRow;a.sjgPrice=0,a.jpPrice=0,a.contractId=null,a.contractCode=null,a.alPriceDate=null,a.fid=this.childDetailRow.priceId,a.isLocked=this.childDetailRow.isLocked?1:0,a.price=Number(this.childDetailRow.price),a.refMatPrice=Number(this.childDetailRow.pricePart1),a.refMatProcessPrice=Number(this.childDetailRow.pricePart2),a.otherPrice=Number(this.childDetailRow.otherPrice),a.pricePart1=Number(this.childDetailRow.pricePart1),a.pricePart2=Number(this.childDetailRow.pricePart2),a.pricePart3=Number(this.childDetailRow.pricePart3),a.pricePart4=Number(this.childDetailRow.pricePart4),a.usrPricePart1=Number(this.childDetailRow.usrPricePart1),a.usrPricePart2=Number(this.childDetailRow.usrPricePart2),a.usrPricePart3=Number(this.childDetailRow.usrPricePart3),a.usrPricePart4=Number(this.childDetailRow.usrPricePart4),a.usrPricePart5=Number(this.childDetailRow.usrPricePart5),a.usrPricePart6=Number(this.childDetailRow.usrPricePart6),a.usrPricePart7=Number(this.childDetailRow.usrPricePart7),a.usrPricePart8=Number(this.childDetailRow.usrPricePart8),a.usrPricePart9=Number(this.childDetailRow.usrPricePart9),a.usrPricePart10=Number(this.childDetailRow.usrPricePart10),e={loaderFlowId:this.detailForm.fid,priceOperateModel:a},this.fetch("/oms/sls/SalesLoaderPriceController/updatePcfMatPrice",e).then(function(e){200===e.status?(t.$message({message:"保存成功",type:"success"}),t.otherVariable.isChildEdit=!1,t.getDetailTable(t.detailId),t.clickTimes=0):t.$message({message:t.returnErrorMsg(e.error),type:"error"})}),this.tabDataI=this.giveState(this.tabDataI)},handleLock:function(){var t=this;this.getAjax("/oms/sls/SalesOrderPriceController/doLockPrice?priceId="+this.childDetailRow.priceId).then(function(e){200===e.status?(t.$message({message:"锁价成功",type:"success"}),t.otherVariable.isChildEdit=!1,t.getDetailTable(t.detailId)):t.$message({message:"锁价失败",type:"error"})})},toggleChildMatcode:function(){this.isShowChildMatCode=!this.isShowChildMatCode,this.isShowChildMatCode?this.tabDataI=this.tabDataI.filter(function(t){return!t.parentVariantId}):this.tabDataI=this.$lodash.cloneDeep(this.copyDataI)},handleCancelChild:function(){this.isShowChildMatCode=!1,this.tabDataI=this.$lodash.cloneDeep(this.copyDataI),this.otherVariable.isChildEdit=!1,this.clickTimes=0},handleNotAllowed:function(){var t=this;this.otherVariable.isChildEdit&&this.$confirm("此操作将清空已填写的数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.handleCancelChild()}).catch(function(){console.log("cnacel")})},isSaveChildRow:function(){var t=this;this.$confirm("是否保存?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.handleSaveChild()}).catch(function(){console.log("cancel")})},showBatchDialog:function(t,e){if(!this.otherVariable.isChildEdit){this.batchType="";["面积(元/m²)","铝锭价","表面加工","后工序","特殊材质费","特殊包装费","长料费","小料费","机型费","锯挂痕费","撕筋费","禁喷加工费"].includes(t.label)&&this.showPrice&&(this.batchType=t.label,this.batchVisible=!0,this.batchForm={},"面积(元/m²)"===this.batchType?this.batchTitle="批量修改面积单价":"表面加工"===this.batchType||"后工序"===this.batchType?this.batchTitle="批量修改"+this.batchType+"价格":this.batchTitle="批量修改"+this.batchType)}},handleBatchEdit:function(){},handleOtherTable:function(t){var e=this;this.otherVariable.isChildEdit?this.$message({message:"编辑状态中",type:"warning"}):(this.showTable=!this.showTable,this.showTable?(this.isResize=!1,this.tableHeightI=this.tableHeightI-150,this.showTable=!0,this.$nextTick(function(){e.isResize=!0})):this.tableHeightI=this.tableHeightI+150,this.tabDataIII=[],this.fetch("/oms/sls/SalesOrderPriceController/getMatPriceItem",{matPriceId:t.priceId}).then(function(t){200===t.status?e.tabDataIII=t.data.list:e.tabDataIII=[]}).then(function(){e.showTable&&e.$refs.tabTableII.initStatus()}))},getUnitList:function(){var t=this;this.getAjax("/basedata/sys/DataDictionary/getDataDictionary?docCode=30126").then(function(e){e.data&&(e.data.forEach(function(t){t.dictValue=Number(t.dictValue)}),t.unitList=t.formatArray(e.data,"dictText","dictValue"))})},getContractList:function(t){var e=this;this.contractList=[],t?this.fetch("/oms/pqm/Contract/getContractMaster?pageSize=1000",{docCode:t}).then(function(t){t.data&&t.data.list?e.contractList=t.data.list:e.contractList=[]}):this.contractList=[]},handleSaveContract:function(){var t=this;if(this.detailId&&this.priceContract){var e=void 0;this.fetch("/oms/sls/LoaderDoc/append-contract",{fId:this.detailId,contractCode:this.priceContract}).then(function(a){if(e=a.status,200===a.status)t.$message({message:"保存合同成功",type:"success"}),t.contractVisible=!1,t.getData(!1);else{var i=a&&a.message||a&&a.data&&a.data.message;t.$message({message:i||"保存合同失败",type:"error"})}})}}}}},1307:function(t,e,a){e=t.exports=a(656)(!0),e.push([t.i,".popup-enter-active[data-v-3b045e34],.popup-leave-active[data-v-3b045e34]{transition:left .1s;left:0}.popup-enter[data-v-3b045e34],.popup-leave-to[data-v-3b045e34]{left:100%}.menu-icon-finance[data-v-3b045e34]{background-size:27px!important;background-position:50%}.btn-position-I[data-v-3b045e34]{position:absolute;bottom:2px;right:40px!important}.btn-position-II[data-v-3b045e34]{position:absolute;bottom:2px;right:100px!important}.btn-position-III[data-v-3b045e34]{position:absolute;bottom:2px;right:160px!important}","",{version:3,sources:["F:/pc_project/erp-aluminium/yunerp/src/page/erp_pc/erp_sale/truckload_mana/truckload_priceguarantee.vue"],names:[],mappings:"AACA,0EAEE,oBAAsB,AACtB,MAAQ,CACT,AACD,+DAEE,SAAW,CACZ,AACD,oCACE,+BAAiC,AACjC,uBAA4B,CAC7B,AACD,iCACE,kBAAmB,AACnB,WAAY,AACZ,oBAAsB,CACvB,AACD,kCACE,kBAAmB,AACnB,WAAY,AACZ,qBAAuB,CACxB,AACD,mCACE,kBAAmB,AACnB,WAAY,AACZ,qBAAuB,CACxB",file:"truckload_priceguarantee.vue",sourcesContent:["\n.popup-enter-active[data-v-3b045e34],\n.popup-leave-active[data-v-3b045e34] {\n  transition: left 0.1s;\n  left: 0;\n}\n.popup-enter[data-v-3b045e34],\n.popup-leave-to[data-v-3b045e34] {\n  left: 100%;\n}\n.menu-icon-finance[data-v-3b045e34] {\n  background-size: 27px !important;\n  background-position: center;\n}\n.btn-position-I[data-v-3b045e34] {\n  position: absolute;\n  bottom: 2px;\n  right: 40px!important;\n}\n.btn-position-II[data-v-3b045e34] {\n  position: absolute;\n  bottom: 2px;\n  right: 100px!important;\n}\n.btn-position-III[data-v-3b045e34] {\n  position: absolute;\n  bottom: 2px;\n  right: 160px!important;\n}\n"],sourceRoot:""}])},1438:function(t,e,a){var i=a(1307);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(657)("13b3e316",i,!0,{})},1625:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-wrap"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.otherVariable.isSpread,expression:"!otherVariable.isSpread"}],staticClass:"common-left",style:{width:100-t.otherVariable.contentWidth+"%"}},[t.isShowNotAllowed?a("div",{staticClass:"not-allowed-wrap",on:{click:t.handleNotAllowed}}):t._e(),t._v(" "),a("div",{staticClass:"common-btn-wrap"},[t._e(),t._v(" "),a("el-button",{on:{click:t.handleRefresh}},[t._v("刷新")]),t._v(" "),a("el-button",{on:{click:t.handleReset}},[t._v("重置")])],1),t._v(" "),a("CommonSearch",{attrs:{isShowStatus:t.isShowStatus,propData:t.searchProp,searchForm:t.searchForm},on:{selectChange:t.selectChange,getData:t.getSearchList}}),t._v(" "),t.isResize?a("CommonTable",{ref:"commontable",attrs:{mainHeight:t.mainHeight,isShowStatus:t.isShowStatus,propData:t.tableProp,otherVariable:t.otherVariable,tableData:t.tableData},on:{handleDetail:t.handleDetail}}):t._e(),t._v(" "),a("CommonPagination",{attrs:{pageObj:t.pageObj},on:{getData:t.getData}})],1),t._v(" "),a("div",{staticClass:"common-right",style:{width:t.otherVariable.contentWidth+"%"}},[a("CommonDetailX",{attrs:{otherVariable:t.otherVariable,propData:t.formProp,detailForm:t.detailForm},on:{toggleSpread:t.toggleSpread}},[a("template",{slot:"header"},[a("div",{ref:"headForm",staticClass:"header-form"},[t._l(t.formProp,function(e){return["outter"===e.type?a("div",[a("span",[t._v(t._s(e.name?e.name+":":""))]),t._v(" "),e.isCheck||e.isStatus?t._e():a("span",[t._v(t._s(t.detailForm[e.prop]))]),t._v(" "),e.isCheck?a("span",[t._v(t._s(1===t.detailForm[e.prop]?"✔":0===t.detailForm[e.prop]?"x":""))]):t._e(),t._v(" "),e.isStatus?a("span",[t._v(t._s(t.returnStatusName[t.detailForm[e.prop]]))]):t._e()]):t._e()]})],2)]),t._v(" "),t.otherVariable.isChildEdit?t._e():a("template",{slot:"main-btn-wrap"},[t.showPrice?a("div",{staticClass:"xs-audit-icon btn-position-I",on:{click:t.handlePrice}},[t._v("提交")]):t._e(),t._v(" "),t.showUnPrice?a("div",{staticClass:"xs-unaudit-icon btn-position-I",on:{click:t.handldUnPrice}},[t._v("撤销")]):t._e(),t._v(" "),a("div",{staticClass:"xs-icon-confirm btn-position-II menu-icon-finance"})]),t._v(" "),a("template",{slot:"head-form-title"},[a("div",{staticClass:"head-form-title"},[a("span",[t._v(" "+t._s(t.detailForm.projectName)+t._s(t.detailForm.projectCode?"("+t.detailForm.projectCode+")":""))]),t._v(" "),a("span")])]),t._v(" "),a("template",{slot:"head-form-content"},[a("div",{staticClass:"head-form-content"},[t._l(t.formProp,function(e){return["inner"!==e.type||e.isLong?t._e():a("div",[a("span",[t._v(t._s(e.name)+"：")]),t._v(" "),a("span",[t._v(t._s(t.detailForm[e.prop]))])])]})],2),t._v(" "),a("div",{staticClass:"remark-wrap"},[a("div",[t._v("备注：")]),t._v(" "),a("div",{staticClass:"headspan scrollBar",attrs:{title:t.detailForm.remark}},[t._v(t._s(t.detailForm.remark))])])]),t._v(" "),a("template",{slot:"common-content"},[a("div",{staticClass:"tab-btn-wrap",style:{left:t.tabLeft}},[t.otherVariable.isChildEdit?a("el-button",{on:{click:t.handleCancelChild}},[t._v("取消")]):t._e(),t._v(" "),t.otherVariable.isChildEdit?a("el-button",{staticClass:"btn-cyan search-btn",on:{click:t.handleSaveChild}},[t._v("保存")]):t._e(),t._v(" "),t.otherVariable.isChildEdit?t._e():a("el-button",{on:{click:t.toggleChildMatcode}},[t._v(t._s(t.isShowChildMatCode?"隐藏":"显示")+"隔热子型号")])],1),t._v(" "),a("el-tabs",{staticClass:"common-content-tab order_style",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{ref:"pricedetail",attrs:{label:"价格明细",name:"first"}},[t.isResize?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingI,expression:"loadingI"}],ref:"pricetable",attrs:{"tooltip-effect":"dark",data:t.tabDataI,border:"",height:t.tableHeightI,"highlight-current-row":""},on:{"row-click":t.clickDetail,"header-contextmenu":t.showBatchDialog}},[a("el-table-column",{attrs:{label:"项目号",align:"left",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.itemNo))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"型材型号",align:"left",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.matCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"颜色名称",align:"left","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cx1Name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单价",align:"center"}},[a("el-table-column",{attrs:{label:"重量(元/kg)",align:"right",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.price?parseFloat(e.row.price).toFixed(3):0))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"价格组成(元/KG)",align:"center"}},[a("el-table-column",{attrs:{label:"铝锭价",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.pricePart1?parseFloat(e.row.pricePart1).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(1)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.pricePart1,callback:function(a){t.$set(e.row,"pricePart1","string"==typeof a?a.trim():a)},expression:"scope.row.pricePart1"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"铝加工",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.pricePart2?parseFloat(e.row.pricePart2).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(2)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.pricePart2,callback:function(a){t.$set(e.row,"pricePart2","string"==typeof a?a.trim():a)},expression:"scope.row.pricePart2"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"表面加工",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.pricePart3?parseFloat(e.row.pricePart3).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(3)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.pricePart3,callback:function(a){t.$set(e.row,"pricePart3","string"==typeof a?a.trim():a)},expression:"scope.row.pricePart3"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"后工序",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pricePart4?parseFloat(e.row.pricePart4).toFixed(3):0))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"附加费",align:"center"}},[a("el-table-column",{attrs:{label:"附加合计",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.pricePart5?parseFloat(e.row.pricePart5).toFixed(3):0))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"特殊材质费",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.usrPricePart1?parseFloat(e.row.usrPricePart1).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(4)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.usrPricePart1,callback:function(a){t.$set(e.row,"usrPricePart1","string"==typeof a?a.trim():a)},expression:"scope.row.usrPricePart1"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"特殊包装费",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.usrPricePart2?parseFloat(e.row.usrPricePart2).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(5)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.usrPricePart2,callback:function(a){t.$set(e.row,"usrPricePart2","string"==typeof a?a.trim():a)},expression:"scope.row.usrPricePart2"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"长料费",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.usrPricePart3?parseFloat(e.row.usrPricePart3).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(6)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.usrPricePart3,callback:function(a){t.$set(e.row,"usrPricePart3","string"==typeof a?a.trim():a)},expression:"scope.row.usrPricePart3"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"小料费",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.usrPricePart4?parseFloat(e.row.usrPricePart4).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(7)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.usrPricePart4,callback:function(a){t.$set(e.row,"usrPricePart4","string"==typeof a?a.trim():a)},expression:"scope.row.usrPricePart4"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"机型费",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.usrPricePart5?parseFloat(e.row.usrPricePart5).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(8)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.usrPricePart5,callback:function(a){t.$set(e.row,"usrPricePart5","string"==typeof a?a.trim():a)},expression:"scope.row.usrPricePart5"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"锯挂痕费",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.usrPricePart6?parseFloat(e.row.usrPricePart6).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(9)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.usrPricePart6,callback:function(a){t.$set(e.row,"usrPricePart6","string"==typeof a?a.trim():a)},expression:"scope.row.usrPricePart6"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"撕筋费",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.usrPricePart7?parseFloat(e.row.usrPricePart7).toFixed(3):0))]),t._v(" "),e.row.isEditState?a("el-input",{attrs:{"data-index":""},on:{focus:function(e){t.setFocus(10)}},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.nextFocus(e):null}},model:{value:e.row.usrPricePart7,callback:function(a){t.$set(e.row,"usrPricePart7","string"==typeof a?a.trim():a)},expression:"scope.row.usrPricePart7"}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"禁喷加工费",align:t.otherVariable.isChildEdit?"center":"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.usrPricePart8?parseFloat(e.row.usrPricePart8).toFixed(3):0))])]}}])})],1)],1),t._v(" "),a("el-table-column",{attrs:{label:"深加工费",align:"center"}},[a("el-table-column",{attrs:{label:"单价",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.sjgPrice))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单位",width:"55",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.sjgPriceUom))]),t._v(" "),e.row.isEditState?a("el-select",{staticStyle:{width:"100%",background:"#fff","border-radius":"5px"},attrs:{clearable:""},model:{value:e.row.sjgPriceUom,callback:function(a){t.$set(e.row,"sjgPriceUom",a)},expression:"scope.row.sjgPriceUom"}},t._l(t.unitList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.label}})}),1):t._e()]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"表面加工",align:"center"}},[a("el-table-column",{attrs:{label:"单价",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.otherPrice))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单位(m²)",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.areaPriceUom))]),t._v(" "),e.row.isEditState?a("el-select",{staticStyle:{width:"100%",background:"#fff","border-radius":"5px"},attrs:{clearable:""},model:{value:e.row.areaPriceUom,callback:function(a){t.$set(e.row,"areaPriceUom",a)},expression:"scope.row.areaPriceUom"}},t._l(t.unitList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.label}})}),1):t._e()]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"特殊加工费",align:"center"}},[a("el-table-column",{attrs:{label:"单价",align:"right"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单位",width:"55",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("span")]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"禁喷加工费",align:"center"}},[a("el-table-column",{attrs:{label:"单价",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.jpPrice))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单位",width:"55",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState?t._e():a("span",[t._v(t._s(e.row.jpPriceUom))]),t._v(" "),e.row.isEditState?a("el-select",{staticStyle:{width:"100%",background:"#fff","border-radius":"5px"},attrs:{clearable:""},model:{value:e.row.jpPriceUom,callback:function(a){t.$set(e.row,"jpPriceUom",a)},expression:"scope.row.jpPriceUom"}},t._l(t.unitList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.label}})}),1):t._e()]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"机台级别",align:"left",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.machineLevelName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"胶条规格",align:"right",width:"80px","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.usrTxt6Name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"生产要求",align:"center"}},[a("el-table-column",{attrs:{label:"喷码",align:"right","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.usrTxt1Name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"禁喷类型",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.usrTxt2Name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"撕筋",width:"55px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("true"===e.row.usrTxt3Name?"✔":"×"))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"型材系列",align:"center"}},[a("el-table-column",{attrs:{label:"型号",align:"left",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.matSeriesCode))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"名称",align:"left","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.matSeriesName))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"材质",align:"left","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cx2Name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"长度",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cx4Name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"膜厚",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.cx3Name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"结算方式",align:"center"}},[a("el-table-column",{attrs:{label:"代码",align:"left",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.settlementMethod))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"名称",align:"left","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.settlementMethodName))])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"备注",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.remark))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isLocked?a("span",[t._v(t._s(e.row.isLocked?"已锁价":""))]):t._e(),t._v(" "),e.row.isLocked?t._e():a("el-button",{on:{click:t.handleLock}},[t._v("锁价")]),t._v(" "),a("i",{staticClass:"el-icon-tickets",attrs:{title:"查看详情"},on:{click:function(a){a.stopPropagation(),t.handleOtherTable(e.row,e.$index)}}})]}}])})],1):t._e(),t._v(" "),t.showTable?a("div",{staticStyle:{"margin-top":"10px"}},[t.isResize?a("CommonTable",{ref:"tabTableII",attrs:{isCenter:!0,isMulTable:!0,otherVariable:t.otherVariable,formTableData:t.tabDataIII,formPropTable:t.tabPropIII,tableHeight:t.tableHeightII}}):t._e()],1):t._e()],1)],1)],1)],2)],1),t._v(" "),a("el-dialog",{attrs:{title:"选择计算价格合同",visible:t.contractVisible,width:"30%"},on:{"update:visible":function(e){t.contractVisible=e}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",remote:"",placeholder:"请输入合同编码进行搜索","remote-method":t.getContractList},model:{value:t.priceContract,callback:function(e){t.priceContract="string"==typeof e?e.trim():e},expression:"priceContract"}},t._l(t.contractList,function(t,e){return a("el-option",{key:e,attrs:{label:t.docCode,value:t.docCode}})}),1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.contractVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"btn-cyan add-btn",on:{click:t.handleSaveContract}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.batchTitle,visible:t.batchVisible,width:"30%"},on:{"update:visible":function(e){t.batchVisible=e}}},[a("el-form",{attrs:{model:t.batchForm}},[a("el-form-item",["面积(元/m²)"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"铝锭价"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"表面加工"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"后工序"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"特殊材质费"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"特殊包装费"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"长料费"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"小料费"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"机型费"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"锯挂痕费"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"撕筋费"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e(),t._v(" "),"禁喷加工费"===t.batchType?a("el-input",{model:{value:t.batchForm.inputVal,callback:function(e){t.$set(t.batchForm,"inputVal","string"==typeof e?e.trim():e)},expression:"batchForm.inputVal"}}):t._e()],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.batchVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"btn-cyan add-btn",on:{click:function(t){}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},792:function(t,e,a){function i(t){a(1438)}var o=a(1)(a(1258),a(1625),i,"data-v-3b045e34",null);t.exports=o.exports},795:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{isShowStatus:{type:Object},propData:{type:Array},searchForm:{type:Object},isInLine:{type:Boolean,default:!1},inputWidth:{type:String,default:""}},data:function(){return{}},methods:{toggleSearch:function(){this.isShowStatus.isMore=!this.isShowStatus.isMore},handleSearch:function(){this.isShowStatus.isMore=!1,this.$emit("getData")},selectChange:function(t){this.$emit("selectChange",t)},changeStatus:function(t){this.$emit("changeStatus",t)}}}},796:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=a(267),o=a.n(i);e.default={props:{mainHeight:{type:Number,default:713},isShowStatus:{type:Object},otherVariable:{type:Object},propData:{type:Array},tableData:{type:Array},isMulTable:{type:Boolean,default:!1},isMulCommonTable:{type:Boolean,default:!1},isCenter:{type:Boolean,default:!1},isSum:{type:Boolean,default:!1},sumParam:{type:Object,default:function(){return{digit:null,theoryWght:null}}},formTableData:{type:Array,default:function(){return[]}},formPropTable:{type:Array,default:function(){return[]}},tableHeight:{type:Number},isHasDbMethod:{type:Boolean,default:!1},isPureClickRow:{type:Boolean,default:!1},mainKey:{type:String,default:"fid"},isMulSelect:{type:Boolean,default:!1},isNotMulSelect:{type:Boolean,default:!0},isNotHandleSelect:{type:Boolean,default:!1}},data:function(){return{tableHeaderColor:{"background-color":"#f5f7fa"},isShowTop:!0,mulTableData:[],copyMulTableData:[],focusTimes:1,editIndex:0,load_status_list:[0,null,50]}},mounted:function(){this.initStatus()},methods:{initStatus:function(){this.mulTableData=this.giveState(this.formTableData),this.copyMulTableData=this.giveState(this.$lodash.cloneDeep(this.formTableData))},tableRowClassName:function(t){var e=t.row,a=t.rowIndex;e.index=a},handleDetail:function(t){this.$emit("handleDetail",t)},renderRow:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fid",i=void 0;i=this.tableData.find(function(e){return e[a]===t}),this.$nextTick(function(){i?(e.$refs.simpleTable.setCurrentRow(i),e.$emit("handleDetail",i)):e.$emit("getInitPage")})},handleSelectionChange:function(t){this.$emit("handleSelectionChange",t)},handleRowEdit:function(t){this.focusTimes=1,this.editIndex=this.$lodash.findIndex(this.mulTableData,[this.mainKey,t[this.mainKey]]),this.otherVariable.isReadTable||(this.otherVariable.isChildEdit=!0,this.mulTableData=this.giveState(this.mulTableData),t.isEditState=!0),this.otherVariable.isOtherTable&&this.$emit("handleOtherTable",t),this.isPureClickRow&&(this.$emit("pureClickRow",t,this.editIndex),this.isNotHandleSelect||this.$refs.multipletable.toggleRowSelection(t))},handleDblClick:function(t){this.isHasDbMethod&&this.$emit("handleDblClick",t)},changeCell:function(t){this.$emit("changeCell",t)},jumpToCell:function(e){var a=this;"down"===e?(this.editIndex+=1,this.editIndex>=this.mulTableData.length&&(this.editIndex=this.mulTableData.length-1)):(this.editIndex-=1,this.editIndex<0&&(this.editIndex=0)),this.$nextTick(function(){a.$refs.multipletable.setCurrentRow(a.mulTableData[a.editIndex]),t(".el-table__body-wrapper .el-input__inner")[a.editIndex].focus()})},showLabel:function(t,e){var a={label:"",value:""};return a=t.find(function(t){return t.value===e})||{label:"",value:""},a.label},sortAlpha:function(t,e,a){return t[a]>e[a]?1:t[a]<e[a]?-1:0},handleFocus:function(){var e=this;t(".el-table__body-wrapper .el-input__inner")[0].focus();var a=[].concat(o()(t(".el-table__body-wrapper .el-input__inner"))).length;t(".el-table__body-wrapper .el-input__inner").keyup(function(i){if(13===i.which){var o=t(this).parents(".is-center"),r=o.next().find(".el-input__inner");if(r.prop("disabled"))r=o.next().next().find(".el-input__inner"),r.focus();else if(r.focus(),e.focusTimes+=1,e.focusTimes>a){var n=void 0;n=e.mulTableData[e.editIndex],e.$emit("handleSaveChild",n,"edit")}}})},getSummaries:function(t){var e=(t.columns,t.data),a=[];if(this.isSum&&this.sumParam.digit&&this.sumParam.theoryWght){var i=null,o=null;e.length&&e.forEach(function(t,e){t.parentVariantId||(i+=Number(t.digit),o+=Number(t.theoryWght))}),a[0]="合计",a[this.sumParam.digit]=i,o&&(a[this.sumParam.theoryWght]=o.toFixed(3))}else a=[];return a},setCircle:function(t){return t>=0&&t<50?"red":t>=100?"green":50===t?"red":"none"},setCircleII:function(t){return 50===t?"yellow":"none"},toggleTop:function(t){this.isShowTop=t},cancelTop:function(){this.$emit("cancelTop")}}}}.call(e,a(85))},797:function(t,e,a){e=t.exports=a(656)(!0),e.push([t.i,".mixin-rowI[data-v-7016dbf5]{color:#333}.mixin-rowII[data-v-7016dbf5]{color:#888;display:flex;align-items:center}.current-row .mixin-rowII[data-v-7016dbf5]{color:#fff}.current-row:hover .mixin-rowII[data-v-7016dbf5]{color:#888}.top-tip[data-v-7016dbf5]{border:1px dotted red;padding-left:2px;padding-right:2px;line-height:1.2;display:inline-block;color:red;margin-left:10px;transform:scale(.88);font-size:12px}.statusCircle[data-v-7016dbf5]{width:10px;height:10px;border-radius:50%;margin-left:10px}.statusCircle.red[data-v-7016dbf5]{background:red}.statusCircle.green[data-v-7016dbf5]{background:green}.statusCircle.yellow[data-v-7016dbf5]{background:#ff0}.statusCircle.none[data-v-7016dbf5]{display:none}.statusCircleII[data-v-7016dbf5]{width:10px;height:10px;border-radius:50%;margin-left:5px}.statusCircleII.red[data-v-7016dbf5]{background:red}.statusCircleII.green[data-v-7016dbf5]{background:green}.statusCircleII.yellow[data-v-7016dbf5]{background:#ff0}.statusCircleII.none[data-v-7016dbf5]{display:none}","",{version:3,sources:["F:/pc_project/erp-aluminium/yunerp/src/components/CommonTable.vue"],names:[],mappings:"AACA,6BACE,UAAY,CACb,AACD,8BACE,WAAY,AACZ,aAAc,AACd,kBAAoB,CACrB,AACD,2CACE,UAAY,CACb,AACD,iDACE,UAAY,CACb,AACD,0BACE,sBAAuB,AACvB,iBAAkB,AAClB,kBAAmB,AACnB,gBAAiB,AACjB,qBAAsB,AACtB,UAAW,AACX,iBAAkB,AAClB,qBAAuB,AACvB,cAAgB,CACjB,AACD,+BACE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,gBAAkB,CACnB,AACD,mCACE,cAAgB,CACjB,AACD,qCACE,gBAAkB,CACnB,AACD,sCACE,eAAmB,CACpB,AACD,oCACE,YAAc,CACf,AACD,iCACE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,eAAiB,CAClB,AACD,qCACE,cAAgB,CACjB,AACD,uCACE,gBAAkB,CACnB,AACD,wCACE,eAAmB,CACpB,AACD,sCACE,YAAc,CACf",file:"CommonTable.vue",sourcesContent:["\n.mixin-rowI[data-v-7016dbf5] {\n  color: #333;\n}\n.mixin-rowII[data-v-7016dbf5] {\n  color: #888;\n  display: flex;\n  align-items: center;\n}\n.current-row .mixin-rowII[data-v-7016dbf5] {\n  color: #fff;\n}\n.current-row:hover .mixin-rowII[data-v-7016dbf5] {\n  color: #888;\n}\n.top-tip[data-v-7016dbf5] {\n  border: 1px dotted red;\n  padding-left: 2px;\n  padding-right: 2px;\n  line-height: 1.2;\n  display: inline-block;\n  color: red;\n  margin-left: 10px;\n  transform: scale(0.88);\n  font-size: 12px;\n}\n.statusCircle[data-v-7016dbf5] {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  margin-left: 10px;\n}\n.statusCircle.red[data-v-7016dbf5] {\n  background: red;\n}\n.statusCircle.green[data-v-7016dbf5] {\n  background: green;\n}\n.statusCircle.yellow[data-v-7016dbf5] {\n  background: yellow;\n}\n.statusCircle.none[data-v-7016dbf5] {\n  display: none;\n}\n.statusCircleII[data-v-7016dbf5] {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  margin-left: 5px;\n}\n.statusCircleII.red[data-v-7016dbf5] {\n  background: red;\n}\n.statusCircleII.green[data-v-7016dbf5] {\n  background: green;\n}\n.statusCircleII.yellow[data-v-7016dbf5] {\n  background: yellow;\n}\n.statusCircleII.none[data-v-7016dbf5] {\n  display: none;\n}\n"],sourceRoot:""}])},798:function(t,e,a){e=t.exports=a(656)(!0),e.push([t.i,".fade-enter-active[data-v-768fdcde],.fade-leave-active[data-v-768fdcde]{transition:opacity .5s}.fade-enter[data-v-768fdcde],.fade-leave-to[data-v-768fdcde]{opacity:0}","",{version:3,sources:["F:/pc_project/erp-aluminium/yunerp/src/components/CommonSearch.vue"],names:[],mappings:"AACA,wEAEE,sBAAwB,CACzB,AACD,6DAEE,SAAW,CACZ",file:"CommonSearch.vue",sourcesContent:["\n.fade-enter-active[data-v-768fdcde],\n.fade-leave-active[data-v-768fdcde] {\n  transition: opacity .5s;\n}\n.fade-enter[data-v-768fdcde],\n.fade-leave-to[data-v-768fdcde] {\n  opacity: 0;\n}\n"],sourceRoot:""}])},799:function(t,e,a){var i=a(797);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(657)("42cac76a",i,!0,{})},800:function(t,e,a){var i=a(798);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(657)("2c11e14a",i,!0,{})},801:function(t,e,a){function i(t){a(800)}var o=a(1)(a(795),a(804),i,"data-v-768fdcde",null);t.exports=o.exports},802:function(t,e,a){function i(t){a(799)}var o=a(1)(a(796),a(803),i,"data-v-7016dbf5",null);t.exports=o.exports},803:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isMulTable?t._e():a("el-table",{directives:[{name:"show",rawName:"v-show",value:!t.isShowStatus.isMore,expression:"!isShowStatus.isMore"}],ref:"simpleTable",staticClass:"main-table",attrs:{height:t.tableHeight||t.mainHeight,"tooltip-effect":"dark",align:t.isCenter?"center":"left",border:"",data:t.tableData,"row-class-name":t.tableRowClassName,"highlight-current-row":"","max-height":.76*t.$store.state.screenHei,"header-cell-style":t.tableHeaderColor},on:{"row-click":t.handleDetail,"selection-change":t.handleSelectionChange}},[(t.otherVariable.isMulSelect||t.isMulSelect)&&t.isNotMulSelect?a("el-table-column",{attrs:{type:"selection",width:"40"}}):t._e(),t._v(" "),t._l(t.propData,function(e,i){return t.isMulCommonTable?t._e():["normal"===e.type&&!e.isMain&&!e.disabledInput||"first"===e.type?a("el-table-column",{attrs:{fixed:e.fixed,align:e.align,label:e.name,width:e.width,sortable:e.sortable,"sort-method":function(a,i){return t.sortAlpha(a,i,e.prop)},"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("span",[t._v(t._s(i.row[e.prop]))])]}}])}):t._e(),t._v(" "),"number"!==e.type||e.isMain?t._e():a("el-table-column",{attrs:{label:e.name,align:e.align,width:e.width,sortable:e.sortable,"sort-method":function(a,i){return t.sortAlpha(a,i,e.prop)},"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("span",[t._v(t._s(i.row[e.prop]))])]}}])}),t._v(" "),"select"!==e.type||e.disabledInput?t._e():a("el-table-column",{attrs:{label:e.name,align:e.align,width:e.width,sortable:e.sortable,"sort-method":function(a,i){return t.sortAlpha(a,i,e.prop)},"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("span",[t._v(t._s(t.showLabel(e.selectList,i.row[e.prop])))])]}}])}),t._v(" "),"mixinNormal"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,align:e.align,width:e.width,"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1]))]),t._v(" "),a("div",{staticClass:"mixin-rowII"},[t._v(" "+t._s(i.row[e.prop2]))])]}}])}):t._e(),t._v(" "),"mixinVoucher"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,align:e.align,width:e.width,"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1]))]),t._v(" "),a("div",{staticClass:"mixin-rowII"},[t._v(" "+t._s("0"==i.row[e.prop2]?"未提交":"50"==i.row[e.prop2]?"已提交":"已审核"))])]}}])}):t._e(),t._v(" "),"mixinVouchers"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,align:e.align,width:e.width,"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1]))]),t._v(" "),a("div",{staticClass:"mixin-rowII"},[t._v(" "+t._s("1"==i.row[e.prop2]?"贷款":"2"==i.row[e.prop2]?"订金":"税金"))])]}}])}):t._e(),t._v(" "),"mixin"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,align:e.align,width:e.width,"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1]))]),t._v(" "),a("div",{staticClass:"mixin-rowII"},[t._v(" "+t._s("已审核"===i.row[e.prop2]?"待签批":i.row[e.prop2]))])]}}])}):t._e(),t._v(" "),"mixinStatus"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,align:e.align,width:e.width,"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1]))]),t._v(" "),a("div",{staticClass:"mixin-rowII"},[a("span",[t._v(" "+t._s("已提交"===i.row[e.prop2]?"待提交":"已确认"==i.row[e.prop2]?"已提交":i.row[e.prop2]))]),t._v(" "),e.hasCircleI?a("span",{staticClass:"statusCircle",class:t.setCircle(i.row[e.status])}):t._e(),t._v(" "),e.hasCircleII?a("span",{staticClass:"statusCircleII",class:t.setCircleII(i.row[e.status])}):t._e()])]}}])}):t._e(),t._v(" "),"mixinTop"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,align:e.align,width:e.width,"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1])),i.row.isTop?a("span",{staticClass:"top-tip",on:{mouseover:function(e){t.toggleTop(!1)},mouseout:function(e){t.toggleTop(!0)},click:t.cancelTop}},[t._v(t._s(t.isShowTop?"置顶":"取消"))]):t._e()]),t._v(" "),a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop2]))])]}}])}):t._e(),t._v(" "),"modelInput"===e.type?a("el-table-column",{attrs:{label:e.name,align:e.align,width:e.width,align:"center","show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",[t._v(t._s(0===i.row[e.prop]?"×":1===i.row[e.prop]?"√":""))])]}}])}):t._e(),t._v(" "),"voucherInput"===e.type?a("el-table-column",{attrs:{label:e.name,align:e.align,width:e.width,align:"center","show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",[t._v(t._s(100===i.row[e.prop]?"√":""))])]}}])}):t._e(),t._v(" "),"visits"===e.type?a("el-table-column",{attrs:{label:e.name,width:e.width,align:e.align},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",[t._v(t._s(0===i.row[e.prop]?"待拜访":50===i.row[e.prop]?"拜访中":"已完成"))])]}}])}):t._e(),t._v(" "),"client"===e.type?a("el-table-column",{attrs:{label:e.name,width:e.width,align:e.align},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",[t._v(t._s("1"===i.row[e.prop]?"普通客户":"2"===i.row[e.prop]?"分销商":"经销商"))])]}}])}):t._e(),t._v(" "),"sell"===e.type?a("el-table-column",{attrs:{label:e.name,width:e.width,align:e.align},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",[t._v(t._s(1===i.row[e.prop]?"国内":2===i.row[e.prop]?"出口":""))])]}}])}):t._e(),t._v(" "),"doctypes"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,width:e.width,align:e.align},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1]))]),t._v(" "),a("div",{staticClass:"mixin-rowII"},[t._v(" "+t._s(0==i.row[e.prop2]?"潜在机会":"落实机会"))])]}}])}):t._e(),t._v(" "),"export_list"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,width:e.width,align:e.align},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1]))]),t._v(" "),a("div",{staticClass:"mixin-rowII"},[t._v(" "+t._s(0==i.row[e.prop2]?"未确定":50==i.row[e.prop2]?"已确定":100==i.row[e.prop2]?"已审核":""))])]}}])}):t._e(),t._v(" "),"is_check_price"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,width:e.width,align:e.align},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1]))]),t._v(" "),0===i.row[e.prop2]||null===i.row[e.prop2]?a("div",{staticClass:"mixin-rowII"},[t._v("未提交")]):t._e(),t._v(" "),50===i.row[e.prop2]?a("div",{staticClass:"mixin-rowII"},[t._v("已提交")]):t._e(),t._v(" "),100===i.row[e.prop2]?a("div",{staticClass:"mixin-rowII"},[t._v("已审核")]):t._e()]}}])}):t._e(),t._v(" "),"is_load"===e.type?a("el-table-column",{attrs:{label:e.name1+e.name2,width:e.width,align:e.align},scopedSlots:t._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[t._v(" "+t._s(i.row[e.prop1]))]),t._v(" "),t.load_status_list.includes(i.row[e.prop2])?a("div",{staticClass:"mixin-rowII"},[t._v("未提交")]):t._e(),t._v(" "),100===i.row[e.prop2]?a("div",{staticClass:"mixin-rowII"},[t._v("已提交")]):t._e(),t._v(" "),100===i.row[e.prop2]||t.load_status_list.includes(i.row[e.prop2])?t._e():a("div",{staticClass:"mixin-rowII"},[t._v(t._s(i.row.docStatusName))])]}}])}):t._e()]}),t._v(" "),t._l(t.propData,function(e,i){return t.isMulCommonTable?[a("el-table-column",{attrs:{label:e.name+(e.unit?e.unit:""),align:e.align,width:e.width,"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return["normal"===e.type?a("div",{attrs:{align:e.align}},[e.rule||e.isCellEdit?t._e():a("span",[t._v(t._s(i.row[e.prop]))]),t._v(" "),"limitLength"===e.rule?a("span",[t._v(t._s(i.row[e.prop]?parseFloat(i.row[e.prop]).toFixed(3):0))]):t._e()]):t._e(),t._v(" "),"select"===e.type?a("div",{attrs:{align:e.align}},[a("span",[t._v(t._s(t.showLabel(e.selectList,i.row[e.prop])))])]):t._e(),t._v(" "),"checkbox"===e.type?a("div",{attrs:{align:e.align}},[a("span",[t._v(t._s("true"===i.row[e.prop]?"✔":"×"))])]):t._e(),t._v(" "),"sell"===e.type?a("div",{attrs:{align:e.align}},[a("span",[t._v(t._s(1===i.row[e.prop]?"国内":2===i.row[e.prop]?"出口":""))])]):t._e()]}}])},[t._l(e.children,function(i){return e.children.length?[a("el-table-column",{attrs:{label:i.name,align:i.align,width:i.width,"show-overflow-tooltip":!i.isShort},scopedSlots:t._u([{key:"default",fn:function(e){return["normal"===i.type?a("span",[t._v(t._s(e.row[i.prop]))]):t._e(),t._v(" "),"checkbox"===i.type?a("span",[t._v(t._s("true"===e.row[i.prop]?"✔":"×"))]):t._e()]}}])},[t._l(i.children,function(e){return i.children.length?[a("el-table-column",{attrs:{prop:e.prop,label:e.name,align:e.align,width:e.width,"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[a("span",[t._v(t._s(i.row[e.prop]))])]}}])})]:t._e()})],2)]:t._e()})],2)]:t._e()}),t._v(" "),t._t("operate-btn")],2),t._v(" "),t.isMulTable?a("el-table",{ref:"multipletable",attrs:{"tooltip-effect":"dark","show-summary":t.isSum,"summary-method":t.getSummaries,border:"",data:t.mulTableData,height:t.tableHeight||.6*t.$store.state.screenHei,"highlight-current-row":"","header-cell-style":t.tableHeaderColor},on:{"row-click":t.handleRowEdit,"row-dblclick":t.handleDblClick,"selection-change":t.handleSelectionChange}},[(t.otherVariable.isMulSelect||t.isMulSelect)&&t.isNotMulSelect?a("el-table-column",{attrs:{type:"selection",width:"40"}}):t._e(),t._v(" "),t._l(t.formPropTable,function(e){return[a("el-table-column",{attrs:{label:e.name+(e.unit?e.unit:""),align:e.align?e.align:"left",width:e.width,"show-overflow-tooltip":!e.isShort,prop:"digit"==e.prop?"digit":"theoryWght"==e.prop?"theoryWght":""},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.isEditState||e.rule||e.isCellEdit?t._e():a("span",{staticClass:"num-cell-r"},[t._v(t._s(i.row[e.prop]))]),t._v(" "),i.row.isEditState||e.rule||!e.isCellEdit?t._e():a("el-input",{nativeOn:{keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;t.jumpToCell("down")},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;t.jumpToCell("up")}],keyup:function(a){t.changeCell(e.prop)}},model:{value:i.row[e.prop],callback:function(a){t.$set(i.row,e.prop,a)},expression:"scope.row[item.prop]"}}),t._v(" "),i.row.isEditState||"limitLength"!==e.rule?t._e():a("span",{staticClass:"num-cell-r"},[t._v(t._s(i.row[e.prop]?parseFloat(i.row[e.prop]).toFixed(3):0))]),t._v(" "),i.row.isEditState&&"select"!==e.type?a("el-input",{model:{value:i.row[e.prop],callback:function(a){t.$set(i.row,e.prop,a)},expression:"scope.row[item.prop]"}}):t._e(),t._v(" "),i.row.isEditState||"keepLength"!==e.rule?t._e():a("span",{staticClass:"num-cell-r"},[t._v(t._s(i.row[e.prop]?parseFloat(i.row[e.prop]).toFixed(3):0))]),t._v(" "),i.row.isEditState&&"keepNum"!==e.type?a("el-input",{model:{value:i.row[e.prop],callback:function(a){t.$set(i.row,e.prop,a)},expression:"scope.row[item.prop]"}}):t._e()]}}])},[t._l(e.children,function(i){return e.children.length?[a("el-table-column",{attrs:{label:i.name,align:i.align?i.align:"left",width:i.width,"show-overflow-tooltip":!i.isShort},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isEditState||"normal"!==i.type||"limitLength"===i.rule?t._e():a("span",{class:i.className},[t._v(t._s(e.row[i.prop]))]),t._v(" "),e.row.isEditState||"normal"!==i.type||"limitLength"!==i.rule?t._e():a("span",{staticClass:"num-cell-r"},[t._v(t._s(e.row[i.prop]?parseFloat(e.row[i.prop]).toFixed(3):0))]),t._v(" "),e.row.isEditState&&"normal"===i.type?a("el-input",{model:{value:e.row[i.prop],callback:function(a){t.$set(e.row,i.prop,a)},expression:"scope.row[i.prop]"}}):t._e(),t._v(" "),e.row.isEditState||"checkbox"!==i.type?t._e():a("span",[t._v(t._s("true"===e.row[i.prop]?"✔":"×"))]),t._v(" "),e.row.isEditState&&"checkbox"===i.type?a("el-checkbox",{attrs:{"true-label":"true","false-label":"false"},model:{value:e.row[i.prop],callback:function(a){t.$set(e.row,i.prop,a)},expression:"scope.row[i.prop]"}}):t._e()]}}])},[t._l(i.children,function(e){return i.children.length?[a("el-table-column",{attrs:{label:e.name,align:e.align?e.align:"left",width:e.width,"show-overflow-tooltip":!e.isShort},scopedSlots:t._u([{key:"default",fn:function(i){return[i.row.isEditState?t._e():a("span",[t._v(t._s(i.row[e.prop]))]),t._v(" "),i.row.isEditState&&"select"!==e.type?a("el-input",{model:{value:i.row[e.prop],callback:function(a){t.$set(i.row,e.prop,a)},expression:"scope.row[s.prop]"}}):t._e()]}}])})]:t._e()})],2)]:t._e()})],2)]}),t._v(" "),t._t("operate-btn")],2):t._e()],1)},staticRenderFns:[]}},804:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"common-search-wrap"},[t._l(t.propData,function(e,i){return[e.isMainSearch?a("el-input",{staticClass:"search-input",style:{width:t.inputWidth},attrs:{placeholder:e.placeholder},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleSearch(e):null}},model:{value:t.searchForm[e.prop],callback:function(a){t.$set(t.searchForm,e.prop,"string"==typeof a?a.trim():a)},expression:"searchForm[item.prop]"}}):t._e()]}),t._v(" "),a("el-button",{staticClass:"search-more",on:{click:t.toggleSearch}},[a("span",[t._v("更多查询")]),t._v(" "),a("i",{staticClass:"el-icon--right",class:t.isShowStatus.isMore?"el-icon-arrow-up":"el-icon-arrow-down"})]),t._v(" "),t._t("search-other-btn")],2),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowStatus.isMore,expression:"isShowStatus.isMore"}],staticClass:"common-more-search"},[a("el-form",{class:t.isInLine?"inline-form-add":"",attrs:{model:t.searchForm,"label-width":"120px",inline:t.isInLine},nativeOn:{submit:function(t){t.preventDefault()},keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleSearch(e):null}}},[t._l(t.propData,function(e,i){return[e.isMainSearch||e.isMain||e.showRemark?t._e():a("el-form-item",{attrs:{label:e.name}},["normal"===e.type?a("el-input",{model:{value:t.searchForm[e.prop],callback:function(a){t.$set(t.searchForm,e.prop,"string"==typeof a?a.trim():a)},expression:"searchForm[item.prop]"}}):t._e(),t._v(" "),"number"===e.type?a("el-input",{model:{value:t.searchForm[e.prop],callback:function(a){t.$set(t.searchForm,e.prop,"string"==typeof a?a.trim():a)},expression:"searchForm[item.prop]"}}):t._e(),t._v(" "),"select"===e.type?a("el-select",{staticStyle:{width:"100%"},model:{value:t.searchForm[e.prop],callback:function(a){t.$set(t.searchForm,e.prop,a)},expression:"searchForm[item.prop]"}},t._l(e.selectList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1):t._e(),t._v(" "),"selectChange"===e.type?a("el-select",{staticStyle:{width:"100%"},on:{change:t.selectChange},model:{value:t.searchForm[e.prop],callback:function(a){t.$set(t.searchForm,e.prop,a)},expression:"searchForm[item.prop]"}},t._l(e.selectList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1):t._e(),t._v(" "),"changeStatus"===e.type?a("el-select",{staticStyle:{width:"100%"},on:{change:t.changeStatus},model:{value:t.searchForm[e.prop],callback:function(a){t.$set(t.searchForm,e.prop,a)},expression:"searchForm[item.prop]"}},t._l(e.selectList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1):t._e(),t._v(" "),"date"===e.type?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.searchForm[e.prop],callback:function(a){t.$set(t.searchForm,e.prop,a)},expression:"searchForm[item.prop]"}}):t._e(),t._v(" "),"checkbox"==e.type?a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.searchForm[e.prop],callback:function(a){t.$set(t.searchForm,e.prop,a)},expression:"searchForm[item.prop]"}}):t._e(),t._v(" "),"mixincheckbox"==e.type?[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.searchForm[e.prop1],callback:function(a){t.$set(t.searchForm,e.prop1,a)},expression:"searchForm[item.prop1]"}},[t._v(t._s(e.name1))]),t._v(" "),a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.searchForm[e.prop2],callback:function(a){t.$set(t.searchForm,e.prop2,a)},expression:"searchForm[item.prop2]"}},[t._v(t._s(e.name2))])]:t._e()],2)]}),t._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:" "}},[a("el-button",{on:{click:function(e){t.isShowStatus.isMore=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"btn-cyan search-btn",on:{click:t.handleSearch}},[t._v("查询")])],1)],2)],1)])],1)},staticRenderFns:[]}},805:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{pageObj:{type:Object}},data:function(){return{}},methods:{handleSize:function(t){this.pageObj.commonSize=t,this.$emit("getData")},handleCurrent:function(t){this.pageObj.commonPage=t,this.$emit("getData")}}}},806:function(t,e,a){var i=a(1)(a(805),a(807),null,null,null);t.exports=i.exports},807:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-pagination",{staticClass:"common-pagination",attrs:{"pager-count":5,"current-page":t.pageObj.commonPage,"page-size":t.pageObj.commonSize,"page-sizes":t.pageObj.commonSizes,layout:"total, sizes, prev, pager, next",total:t.pageObj.commonTotal},on:{"size-change":t.handleSize,"current-change":t.handleCurrent}})},staticRenderFns:[]}},830:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{isShowStatus:{type:Object},otherVariable:{type:Object},propData:{type:Array},detailForm:{type:Object},hasSimpleHead:{type:Boolean,default:!1},headHeight:{type:String,default:"120px"},marginTop:{type:String,default:"10px"}},data:function(){return{isSpread:!1}},mounted:function(){this.otherVariable.contentHead=this.$refs.contentHead.offsetHeight},methods:{toggleSpread:function(){this.$emit("toggleSpread"),this.isSpread=this.otherVariable.isSpread},handleEdit:function(){this.$emit("handleEdit")},handleDelete:function(){this.$emit("handleDelete")},selectChange:function(t,e){this.$emit("selectChange",t,e)}}}},834:function(t,e,a){var i=a(1)(a(830),a(836),null,null,null);t.exports=i.exports},836:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-right-wrap"},[t._t("header",[t._v(" ")]),t._v(" "),a("div",{staticClass:"common-right-content"},[t.otherVariable.isHeadComplex?t._e():a("div",{staticClass:"content-head",style:{height:t.headHeight}},[a("span",[t._v(t._s(t.otherVariable.detailTitle))]),t._v(" "),t._t("main-btn-wrap")],2),t._v(" "),t.otherVariable.isHeadComplex?a("div",{ref:"contentHead",staticClass:"content-head-x",class:t.hasSimpleHead?"content-head-simple":""},[t._t("head-form-title"),t._v(" "),t._t("head-form-content"),t._v(" "),t._t("main-btn-wrap")],2):t._e(),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!t.isSpread,expression:"!isSpread"}],staticClass:"icon-spread",on:{click:t.toggleSpread}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.isSpread,expression:"isSpread"}],staticClass:"icon-retract",on:{click:t.toggleSpread}}),t._v(" "),t._t("model-input"),t._v(" "),a("div",{staticClass:"content-detail"},[t.otherVariable.isFormComplex?t._e():a("div",{staticClass:"content-read-form",style:{"margin-top":t.marginTop}},[a("el-form",{attrs:{model:t.detailForm,"label-width":"120px",inline:t.otherVariable.isInlineForm}},[t._l(t.propData,function(e,i){return["title"===e.type?a("div",{staticClass:"inline-form-title",style:{width:e.width||"80px"}},[t._v(t._s(e.name))]):t._e(),t._v(" "),e.isMain?t._e():a("el-form-item",{class:e.isLong?"full-remark":"",attrs:{label:e.name}},["normal"===e.type?a("el-input",{attrs:{readonly:!0},model:{value:t.detailForm[e.prop],callback:function(a){t.$set(t.detailForm,e.prop,"string"==typeof a?a.trim():a)},expression:"detailForm[item.prop]"}}):t._e(),t._v(" "),"select"===e.type?a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:t.detailForm[e.prop],callback:function(a){t.$set(t.detailForm,e.prop,a)},expression:"detailForm[item.prop]"}},t._l(e.selectList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1):t._e(),t._v(" "),"selectChange"===e.type?a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isShowStatus.isRead||e.isRead},on:{change:function(a){t.selectChange(a,e.selectParam)}},model:{value:t.detailForm[e.prop],callback:function(a){t.$set(t.detailForm,e.prop,a)},expression:"detailForm[item.prop]"}},t._l(e.selectList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1):t._e(),t._v(" "),"date"===e.type?a("el-input",{attrs:{readonly:!0},model:{value:t.detailForm[e.prop],callback:function(a){t.$set(t.detailForm,e.prop,"string"==typeof a?a.trim():a)},expression:"detailForm[item.prop]"}}):t._e()],1)]})],2)],1),t._v(" "),t.otherVariable.isFormComplex?a("div",{staticClass:"content-read-form-x",style:{"margin-top":t.marginTop}},[t._t("common-content")],2):t._e()])],2)],2)},staticRenderFns:[]}},849:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){e.default={data:function(){return{isEnter:!1}},props:{},methods:{selectEnterEvent:function(){var t=this;++this.enterTimes>=2&&this.isBanNextFocus&&this.$nextTick(function(){t.nextFocus()})},remoteEnterEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments[1];if(this.isEnter=!0,++this.enterTimes>=2)switch(e){case"matCode":this.setMatCode(t);break;case"cx1Name":this.setColorCode(t);break;case"cx2Name":this.setMatAlloy(t);break;case"cx3Name":this.setMatThick(t);break;case"usrTxt2Name":this._setUsrTxt2()}},tabEvent:function(t,e){switch(e){case"matCode":this.setMatCode(this.firstMatCode);break;case"cx1Name":this.setColorCode(this.firstColorName);break;case"cx2Name":this.setMatAlloy(this.firstMatAlloy);break;case"cx3Name":this.setMatThick(this.firstMatThick)}},blurEvent:function(t,e){},handleCtrlV:function(t,e){var a=this;this.$nextTick(function(){var i=t.target.value;switch(e){case"matCode":a.getMatCodeList(i,i,null,1);break;case"cx1Name":a.getColorCodeList(i,i,null,1);break;case"cx2Name":a.getMatAlloy(i,i,null,1);break;case"cx3Name":a.getMatThick(i,i,null,1)}})},banNextFocus:function(t){this.isBanNextFocus=t},setFocus:function(t){this.isEnter=!1,this.currentIndex=t},nextFocus:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"该项";if(!e||!!i){var r=this.$el.querySelectorAll("[data-index]");if(r.length>this.currentIndex){var n=r.item(++this.currentIndex);null!==n&&this.$nextTick(function(){a.autoFocus(n)})}else console.log("reset this.currentIndex")}else this.$message({message:o+"不能为空",type:"warning"})},autoFocus:function(t){var e=t;-1===["INPUT","TEXTAREA"].indexOf(t.tagName.toUpperCase())&&(e=t.querySelector("input,textarea")),e&&e.focus()},goUp:function(t){this.handleSaveChild(t,"up")},goDown:function(t){this.tabDataI[this.editIndex].variantId&&this.handleSaveChild(t,"down")},goTemp:function(e,a){"down"===a?(this.editIndex+=1,this.editIndex<this.tabDataI.length?(this.tabDataI[this.editIndex-1].isEditState=!1,this.tabDataI[this.editIndex].isEditState=!0,this.$refs.childTable.setCurrentRow(this.tabDataI[this.editIndex]),this.clickDetail(this.tabDataI[this.editIndex]),this.$nextTick(function(){t(".el-table__body-wrapper .el-input__inner")[e].focus()})):(this.editIndex=this.tabDataI.length-1,this.otherVariable.isChildEdit=!1)):"up"===a?(this.editIndex-=1,this.editIndex<0?(this.editIndex=0,this.isAddDetail?this.handleAddChild():this.handleCancelChild()):(this.tabDataI[this.editIndex+1].isEditState=!1,this.tabDataI[this.editIndex].isEditState=!0,this.clickDetail(this.tabDataI[this.editIndex]),this.$refs.childTable.setCurrentRow(this.tabDataI[this.editIndex]),this.$nextTick(function(){t(".el-table__body-wrapper .el-input__inner")[e].focus()}))):"first"===a&&(this.editIndex=0,this.isAddDetail?this.handleAddChild():this.handleCancelChild())},handleLastCell:function(t){13===t.keyCode&&this.handleSaveChild(0,"first"),9!==t.keyCode||t.shiftKey||(t.returnValue=!1,this.handleSaveChild(0,"first"))},listenScroll:function(){var t=this,e=this.$refs.childTable.$el.querySelector(".el-table__body-wrapper");e.addEventListener("scroll",function(){t.scrollHeight=e.scrollTop})},changeSize:function(){var t=this;this.isResize=!1,this.tableHeight=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-154,this.mainHeight=window.innerHeight-214,this.$nextTick(function(){t.isResize=!0})},listenResize:function(){var t=this;window.onresize=function(){t.changeSize()}},changeSizeII:function(){var t=this;this.isResize=!1,this.formHeight=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-154,this.tableHeight=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-154,this.mainHeight=window.innerHeight-214,this.$nextTick(function(){t.isResize=!0})},listenResizeII:function(){var t=this;window.onresize=function(){t.changeSizeII()}},changeSizeIII:function(){var t=this;this.isResize=!1,this.showTable?this.tableHeightI=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-304:this.tableHeightI=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-154,this.mainHeight=window.innerHeight-214,this.$nextTick(function(){t.isResize=!0})},listenResizeIII:function(){var t=this;window.onresize=function(){t.changeSizeIII()}},toggleSpread:function(){this.otherVariable.isSpread=!this.otherVariable.isSpread,this.otherVariable.isSpread?this.otherVariable.contentWidth=100:this.otherVariable.contentWidth=this.tempWidth},notShowTip:function(t){t?(localStorage.setItem("isShowDetailBan",!0),this.$store.state.isShowDetailBan=!0):(localStorage.setItem("isShowDetailBan",!1),this.$store.state.isShowDetailBan=!1)}}}}.call(e,a(85))},850:function(t,e,a){var i=a(1)(a(849),null,null,null,null);t.exports=i.exports}});
//# sourceMappingURL=62.9a24adc0144aaa242018.js.map