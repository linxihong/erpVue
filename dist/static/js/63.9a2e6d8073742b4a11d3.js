webpackJsonp([63],{1257:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(850),o=a.n(i),n=a(801),r=a.n(n),s=a(802),l=a.n(s),c=a(806),p=a.n(c),d=a(834),u=a.n(d);t.default={mixins:[o.a],components:{CommonSearch:r.a,CommonTable:l.a,CommonPagination:p.a,CommonDetailX:u.a},data:function(){return{mainHeight:716,isResize:!0,isShowNotAllowed:!1,hanleNo:"",isShowStatus:{isMore:!1,isRead:!0,isPopUp:!1},tableHeightI:.62*this.$store.state.screenHei,tableHeightII:150,otherVariable:{isSpread:!1,contentWidth:70,popupTitle:"",isMulSelect:!0,isInlineForm:!0,isEdit:!1,isChildEdit:!1,isHeadComplex:!0,isFormComplex:!0,loading:!1,$isCustom:!0,isSaving:!1},showTable:!1,tempWidth:null,showButton:!1,showUnAudit:!1,tableData:[],searchProp:[{name:"装车单",prop:"refDocCode",type:"date",isMainSearch:!0,isMain:!1,placeholder:"请输入装车单号"},{name:"装车价格状态",prop:"tempStatus",type:"selectChange",selectList:[{value:1,label:"全部"},{value:2,label:"未审核"},{value:3,label:"已审核"}],isMainSearch:!1,isMain:!1},{name:"下单日期",prop:"orderDocDateStart",type:"date",isMainSearch:!1,isMain:!1},{name:"至",prop:"orderDocDateEnd",type:"date",isMainSearch:!1,isMain:!1},{name:"销售公司",prop:"companyName",type:"normal",isMainSearch:!1,isMain:!1},{name:"供货公司",prop:"supplyCompanyName",type:"normal",isMainSearch:!1,isMain:!1}],formProp:[{name:"装车单号",prop:"docCode",type:"outter"},{name:"装车日期",prop:"docDate",type:"outter"},{name:"交货日期",prop:"docDate",type:"outter"},{name:"单据状态",prop:"docStatusName",type:"outter"},{name:"已审价",prop:"isCheckPrice",type:"outter",isCheck:!0},{name:"客户",prop:"clientCode",type:"inner"},{name:"经销商",prop:"clientCode2",type:"inner"},{name:"合同号",prop:"contractCode",type:"inner"},{name:"铝锭取价方式",prop:"alPriceMethodName",type:"inner"},{name:"铝锭价",prop:"alPrice",type:"inner"},{name:"销售公司",prop:"companyName",type:"inner"},{name:"取价日期",prop:"alPriceDate",type:"inner"},{name:"结算方式",prop:"settlementMethodName",type:"inner"},{name:"铝价日期",prop:"alPriceDate",type:"inner"},{name:"备注",prop:"remark",type:"inner",isLong:!0}],tableProp:[{name:"fid",prop:"fid",type:"normal",isMain:!0},{name1:"装车单号/",prop1:"refDocCode",name2:"状态",prop2:"priceStatus",type:"is_check_price",width:"110"},{name1:"工程号/",prop1:"projectCode",name2:"装车日期",prop2:"docDate",type:"mixin",width:"120"},{name1:"客户/",prop1:"clientCode",name2:"经销商",prop2:"clientCode2",type:"mixin",width:"100"},{name1:"送货地区/",prop1:"destination",name2:"提货方式",prop2:"loaderMethodName",type:"mixin"}],searchForm:{tempStatus:2,minPriceStatus:50,maxPriceStatus:100},docStatus:"",detailForm:{},detailId:null,detailIdList:[],docCode:null,pageObj:{commonPage:1,commonSize:10,commonSizes:[10,20,30,40,50,100],commonTotal:0},tabLeft:"100px",activeName:"first",tabDataI:[],loadingI:!1,tabPropIII:[{prop:"itemNo",name:"序号"},{prop:"priceItemText",name:"合同条款内容",type:"normal",width:"100"},{prop:"",name:"价格",children:[{prop:"otherPrice",name:"面积(元/m²)",type:"normal"},{prop:"price",name:"重量(元/kg)",type:"normal"}]},{prop:"",name:"价格组成",children:[{prop:"",name:"加工费"},{prop:"",name:"运算费"},{prop:"",name:"打托费"},{prop:"",name:"附加费"}]},{prop:"",name:"特批不收费",children:[{prop:"",name:"运输"},{prop:"",name:"打托"}]}],tabDataIII:[]}},mounted:function(){this.getData(),this.listenResizeIII(),this.changeSizeIII(),this.tempWidth=this.otherVariable.contentWidth},methods:{getData:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.searchForm.refDocCode?(this.searchForm={refDocCode:this.searchForm.refDocCode},this.selectChange(1)):this.searchForm.refDocCode=null,this.tableData=[],this.fetch("/oms/sls/LoaderDoc/getLoaderAndContractInfo?pageNo="+this.pageObj.commonPage+"&pageSize="+this.pageObj.commonSize,this.searchForm).then(function(a){a.data&&a.data.list?(e.tableData=a.data.list,e.pageObj.commonTotal=a.data.total,t?e.$nextTick(function(){e.$refs.commontable.renderRow(e.tableData[0].fid)}):e.$nextTick(function(){e.$refs.commontable.renderRow(e.detailId)})):e.pageObj.commonTotal=0})},selectChange:function(e){1===e?(this.searchForm.minPriceStatus=50,this.searchForm.maxPriceStatus=101):2===e?(this.searchForm.minPriceStatus=50,this.searchForm.maxPriceStatus=100):3===e&&(this.searchForm.minPriceStatus=100,this.searchForm.maxPriceStatus=100)},getSearchList:function(){this.pageObj.commonPage=1,this.pageObj.commonSize=10,this.getData()},handleReset:function(){this.searchForm={tempStatus:2,minPriceStatus:50,maxPriceStatus:100},this.handleRefresh()},handleRefresh:function(){this.getData(),this.tabDataI=[],this.detailForm={},this.showUnAudit=!1,this.showButton=!1},changeRefresh:function(){this.getData(!1),this.otherVariable.isChildEdit=!1},handleDetail:function(e){this.isShowNotAllowed=!0,this.loadingI=!0,0===e.priceStatus||null===e.priceStatus||50===e.priceStatus?(this.showUnAudit=!1,this.showButton=!0):100===e.priceStatus?(this.showUnAudit=!0,this.showButton=!1):(this.showUnAudit=!1,this.showButton=!1),this.detailForm=e,this.showTable=!1,this.tabDataIII=[],this.detailId=e.fid,this.docStatus=e.docStatus,this.docCode=e.docCode,this.getDetailTable(e.fid)},handleSelectionChange:function(e){var t=this;this.detailIdList=[],e.forEach(function(e){t.detailIdList.push(e.fid)})},getDetailTable:function(e){var t=this;this.tabDataI=[],this.getAjax("/oms/sls/SalesLoaderPriceController/getLoaderPrice?loaderFlowId="+e).then(function(e){t.loadingI=!1,t.isShowNotAllowed=!1,200===e.status&&e.data?t.tabDataI=e.data:t.tabDataI=[]})},clickDetail:function(e){var t=this;this.tabDataIII=[],this.showTable=!this.showTable,this.showTable?(this.isResize=!1,this.tableHeightI=this.tableHeightI-150,this.showTable=!0,this.$nextTick(function(){t.isResize=!0})):this.tableHeightI=this.tableHeightI+150,this.fetch("/oms/sls/SalesOrderPriceController/getMatPriceItem",{matPriceId:e.priceId}).then(function(e){200===e.status?t.tabDataIII=e.data.list:t.tabDataIII=[]}).then(function(){t.showTable&&t.$refs.tabTableIII.initStatus()})},handleAdudit:function(e){var t=this;this.detailIdList.length>0&&"multi"===e?this.hanleNo=this.detailIdList.length:this.hanleNo="",this.$confirm("是否确认审核"+this.hanleNo+"条订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=void 0,i=void 0,o=!1;if(t.otherVariable.isSaving=!0,"alone"===e?(o=!1,a={loaderFlowId:t.detailId,checkPrice:1},i="/oms/sls/SalesLoaderPriceController/checkLoaderPriceInfo"):(o=!0,a={loaderFlowIds:t.detailIdList},i="/oms/sls/SalesLoaderPriceController/checkLoaderPriceInfoBatch"),o&&t.detailIdList.length||!o){var n=void 0;t.fetch(i,a).then(function(e){n=e.status,200===e.status?(t.$message({message:e.data,type:"success"}),0!==t.searchForm.tempStatus||o?t.getData():t.getData(!1)):t.$message({message:e.data,type:"warning"})}).then(function(){t.otherVariable.isSaving=!1})}else t.$message({message:"请勾选装车单",type:"warning"})})},handleUnAudit:function(){var e=this,t=void 0,a=void 0;this.otherVariable.isSaving=!0,t={loaderFlowId:this.detailId},a="/oms/sls/SalesLoaderPriceController/checkLoaderPriceInfo";var i=void 0;this.fetch(a,t).then(function(t){i=t.status,200===t.status?(e.$message({message:t.data,type:"success"}),0===e.searchForm.tempStatus?e.getData(!1):e.getData()):e.$message({message:t.data,type:"warning"})}).then(function(){e.otherVariable.isSaving=!1})}}}},1305:function(e,t,a){t=e.exports=a(656)(!0),t.push([e.i,".popup-enter-active[data-v-39ecc08e],.popup-leave-active[data-v-39ecc08e]{transition:left .1s;left:0}.popup-enter[data-v-39ecc08e],.popup-leave-to[data-v-39ecc08e]{left:100%}.exportCount[data-v-39ecc08e]{z-index:99;right:216px;border-radius:50%;width:55px;height:55px;line-height:55px;font-size:18px}.exportCount[data-v-39ecc08e],.exportText[data-v-39ecc08e]{position:absolute;bottom:3px;transform:translateY(50%);cursor:pointer;text-align:center;color:#fff;background:#ff7f00}.exportText[data-v-39ecc08e]{z-index:98;right:169px;width:61px;height:33px;line-height:33px;font-size:15px;border-top-right-radius:16px;border-bottom-right-radius:16px}.exportCount1[data-v-39ecc08e]{z-index:99;right:99px;border-radius:50%;width:55px;height:55px;line-height:47px;font-size:18px;border:1px solid #666}.exportCount1[data-v-39ecc08e],.exportText1[data-v-39ecc08e]{position:absolute;bottom:3px;transform:translateY(50%);cursor:pointer;text-align:center;color:#666;background-color:#fff}.exportText1[data-v-39ecc08e]{z-index:98;right:49px;width:61px;height:33px;line-height:33px;font-size:15px;border-top-right-radius:16px;border-bottom-right-radius:16px;border:1px solid #666}","",{version:3,sources:["F:/pc_project/erp-aluminium/yunerp/src/page/erp_pc/erp_sale/truckload_mana/truckload_priceaudit.vue"],names:[],mappings:"AACA,0EAEE,oBAAsB,AACtB,MAAQ,CACT,AACD,+DAEE,SAAW,CACZ,AACD,8BACE,WAAY,AAEZ,YAAa,AAIb,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,iBAAkB,AAElB,cAAgB,CAGjB,AACD,2DAdE,kBAAmB,AAEnB,WAAY,AACZ,0BAA2B,AAC3B,eAAgB,AAKhB,kBAAmB,AAEnB,WAAY,AACZ,kBAAoB,CAkBrB,AAhBD,6BACE,WAAY,AAEZ,YAAa,AAIb,WAAY,AACZ,YAAa,AACb,iBAAkB,AAElB,eAAgB,AAGhB,6BAA8B,AAC9B,+BAAiC,CAClC,AACD,+BACE,WAAY,AAEZ,WAAY,AAIZ,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,iBAAkB,AAElB,eAAgB,AAGhB,qBAAuB,CACxB,AACD,6DAfE,kBAAmB,AAEnB,WAAY,AACZ,0BAA2B,AAC3B,eAAgB,AAKhB,kBAAmB,AAEnB,WAAY,AACZ,qBAAwB,CAoBzB,AAjBD,8BACE,WAAY,AAEZ,WAAY,AAIZ,WAAY,AACZ,YAAa,AACb,iBAAkB,AAElB,eAAgB,AAGhB,6BAA8B,AAC9B,gCAAiC,AACjC,qBAAuB,CACxB",file:"truckload_priceaudit.vue",sourcesContent:["\n.popup-enter-active[data-v-39ecc08e],\n.popup-leave-active[data-v-39ecc08e] {\n  transition: left 0.1s;\n  left: 0;\n}\n.popup-enter[data-v-39ecc08e],\n.popup-leave-to[data-v-39ecc08e] {\n  left: 100%;\n}\n.exportCount[data-v-39ecc08e] {\n  z-index: 99;\n  position: absolute;\n  right: 216px;\n  bottom: 3px;\n  transform: translateY(50%);\n  cursor: pointer;\n  border-radius: 50%;\n  width: 55px;\n  height: 55px;\n  line-height: 55px;\n  text-align: center;\n  font-size: 18px;\n  color: #fff;\n  background: #FF7F00;\n}\n.exportText[data-v-39ecc08e] {\n  z-index: 98;\n  position: absolute;\n  right: 169px;\n  bottom: 3px;\n  transform: translateY(50%);\n  cursor: pointer;\n  width: 61px;\n  height: 33px;\n  line-height: 33px;\n  text-align: center;\n  font-size: 15px;\n  color: #fff;\n  background: #FF7F00;\n  border-top-right-radius: 16px;\n  border-bottom-right-radius: 16px;\n}\n.exportCount1[data-v-39ecc08e] {\n  z-index: 99;\n  position: absolute;\n  right: 99px;\n  bottom: 3px;\n  transform: translateY(50%);\n  cursor: pointer;\n  border-radius: 50%;\n  width: 55px;\n  height: 55px;\n  line-height: 47px;\n  text-align: center;\n  font-size: 18px;\n  color: #666;\n  background-color: white;\n  border: 1px solid #666;\n}\n.exportText1[data-v-39ecc08e] {\n  z-index: 98;\n  position: absolute;\n  right: 49px;\n  bottom: 3px;\n  transform: translateY(50%);\n  cursor: pointer;\n  width: 61px;\n  height: 33px;\n  line-height: 33px;\n  text-align: center;\n  font-size: 15px;\n  color: #666;\n  background-color: white;\n  border-top-right-radius: 16px;\n  border-bottom-right-radius: 16px;\n  border: 1px solid #666;\n}\n"],sourceRoot:""}])},1436:function(e,t,a){var i=a(1305);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(657)("c61d8c48",i,!0,{})},1623:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-wrap"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.otherVariable.isSpread,expression:"!otherVariable.isSpread"}],staticClass:"common-left",style:{width:100-e.otherVariable.contentWidth+"%"}},[e.isShowNotAllowed?a("div",{staticClass:"not-allowed-wrap"}):e._e(),e._v(" "),a("div",{staticClass:"common-btn-wrap"},[a("el-button",{staticClass:"btn-cyan add-btn",attrs:{disabled:e.otherVariable.isSaving},on:{click:function(t){e.handleAdudit("multi")}}},[e._v("批量审核")]),e._v(" "),a("el-button",{on:{click:e.handleRefresh}},[e._v("刷新")]),e._v(" "),a("el-button",{on:{click:e.handleReset}},[e._v("重置")])],1),e._v(" "),a("CommonSearch",{attrs:{isShowStatus:e.isShowStatus,propData:e.searchProp,searchForm:e.searchForm},on:{selectChange:e.selectChange,getData:e.getSearchList}}),e._v(" "),e.isResize?a("CommonTable",{ref:"commontable",attrs:{mainHeight:e.mainHeight,isShowStatus:e.isShowStatus,propData:e.tableProp,otherVariable:e.otherVariable,tableData:e.tableData},on:{handleDetail:e.handleDetail,handleSelectionChange:e.handleSelectionChange}}):e._e(),e._v(" "),a("CommonPagination",{attrs:{pageObj:e.pageObj},on:{getData:e.getData}})],1),e._v(" "),a("div",{staticClass:"common-right",style:{width:e.otherVariable.contentWidth+"%"}},[a("CommonDetailX",{attrs:{otherVariable:e.otherVariable,propData:e.formProp,detailForm:e.detailForm},on:{toggleSpread:e.toggleSpread}},[a("template",{slot:"header"},[a("div",{ref:"headForm",staticClass:"header-form"},[e._l(e.formProp,function(t){return["outter"===t.type?a("div",[a("span",[e._v(e._s(t.name?t.name+":":""))]),e._v(" "),t.isCheck?e._e():a("span",[e._v(e._s(e.detailForm[t.prop]))]),e._v(" "),t.isCheck?a("span",[e._v(e._s(1===e.detailForm[t.prop]?"✔":0===e.detailForm[t.prop]?"x":""))]):e._e()]):e._e()]})],2)]),e._v(" "),a("template",{slot:"main-btn-wrap"},[e.showButton?a("div",{staticClass:"xs-audit-icon",class:e.otherVariable.isSaving?"banClick":"",on:{click:function(t){!e.otherVariable.isSaving&&e.handleAdudit("alone")}}},[e._v("审核")]):e._e(),e._v(" "),e.showUnAudit?a("div",{staticClass:"xs-unaudit-icon",class:e.otherVariable.isSaving?"banClick":"",on:{click:function(t){!e.otherVariable.isSaving&&e.handleUnAudit()}}},[e._v("反审")]):e._e()]),e._v(" "),a("template",{slot:"head-form-title"},[a("div",{staticClass:"head-form-title"},[a("span",[e._v(" "+e._s(e.detailForm.projectName)+e._s(e.detailForm.projectCode?"("+e.detailForm.projectCode+")":""))]),e._v(" "),a("span")])]),e._v(" "),a("template",{slot:"head-form-content"},[a("div",{staticClass:"head-form-content"},[e._l(e.formProp,function(t){return["inner"!==t.type||t.isLong?e._e():a("div",[a("span",[e._v(e._s(t.name)+"：")]),e._v(" "),a("span",[e._v(e._s(e.detailForm[t.prop]))])])]})],2),e._v(" "),a("div",{staticClass:"remark-wrap"},[a("div",[e._v("备注：")]),e._v(" "),a("div",{staticClass:"headspan scrollBar",attrs:{title:e.detailForm.remark}},[e._v(e._s(e.detailForm.remark))])])]),e._v(" "),a("template",{slot:"common-content"},[a("el-tabs",{staticClass:"common-content-tab order_style",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"价格明细",name:"first"}},[e.isResize?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingI,expression:"loadingI"}],attrs:{"tooltip-effect":"dark",data:e.tabDataI,border:"",height:e.tableHeightI,"highlight-current-row":""},on:{"row-click":e.clickDetail}},[a("el-table-column",{attrs:{label:"项目号",align:"left",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.itemNo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"型材型号",lign:"left",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.matCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"颜色名称",align:"left","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cx1Name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"单价",align:"center"}},[a("el-table-column",{attrs:{label:"面积(元/m²)",align:"right",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.otherPrice?parseFloat(t.row.otherPrice).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"重量(元/kg)",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price?parseFloat(t.row.price).toFixed(3):0))])]}}])})],1),e._v(" "),a("el-table-column",{attrs:{label:"价格组成(元/KG)",align:"center"}},[a("el-table-column",{attrs:{label:"铝锭价",align:"right",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pricePart8?parseFloat(t.row.pricePart8).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"铝加工",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pricePart1?parseFloat(t.row.pricePart1).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"表面加工",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pricePart2?parseFloat(t.row.pricePart2).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"后工序",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pricePart3?parseFloat(t.row.pricePart3).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"附加费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.pricePart4?parseFloat(t.row.pricePart4).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"特殊材质费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrPricePart1?parseFloat(t.row.usrPricePart1).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"特殊包装费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrPricePart1?parseFloat(t.row.usrPricePart2).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"长料费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrPricePart1?parseFloat(t.row.usrPricePart3).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"小料费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrPricePart1?parseFloat(t.row.usrPricePart4).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"机型费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrPricePart1?parseFloat(t.row.usrPricePart5).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"锯挂痕费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrPricePart1?parseFloat(t.row.usrPricePart6).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"撕筋费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrPricePart1?parseFloat(t.row.usrPricePart7).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"禁喷加工费",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrPricePart1?parseFloat(t.row.usrPricePart8).toFixed(3):0))])]}}])})],1),e._v(" "),a("el-table-column",{attrs:{label:"机台级别",align:"right",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.machineLevelCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"胶条规格",align:"right",width:"80px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrTxt6Name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"生产要求",align:"center"}},[a("el-table-column",{attrs:{label:"喷码",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrTxt1Name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"禁喷类型",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrTxt2Name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"撕筋",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.usrTxt3Name))])]}}])})],1),e._v(" "),a("el-table-column",{attrs:{label:"型材系列",align:"center"}},[a("el-table-column",{attrs:{label:"型号",align:"left",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.matSeriesCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"名称",align:"left","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.matSeriesName))])]}}])})],1),e._v(" "),a("el-table-column",{attrs:{label:"材质",align:"left","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cx2Name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"长度",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cx4Name?parseFloat(t.row.cx4Name).toFixed(3):0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"膜厚",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cx3Name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结算方式",align:"center"}},[a("el-table-column",{attrs:{label:"代码",align:"left",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.settlementMethod))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"名称",align:"left","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.settlementMethodName))])]}}])})],1),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.remark))])]}}])})],1):e._e(),e._v(" "),e.showTable?a("div",{staticStyle:{"margin-top":"10px"}},[e.isResize?a("CommonTable",{ref:"tabTableIII",attrs:{isCenter:!0,isMulTable:!0,otherVariable:e.otherVariable,formTableData:e.tabDataIII,formPropTable:e.tabPropIII,tableHeight:e.tableHeightII}}):e._e()],1):e._e()],1)],1)],1)],2)],1)])},staticRenderFns:[]}},791:function(e,t,a){function i(e){a(1436)}var o=a(1)(a(1257),a(1623),i,"data-v-39ecc08e",null);e.exports=o.exports},795:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{isShowStatus:{type:Object},propData:{type:Array},searchForm:{type:Object},isInLine:{type:Boolean,default:!1},inputWidth:{type:String,default:""}},data:function(){return{}},methods:{toggleSearch:function(){this.isShowStatus.isMore=!this.isShowStatus.isMore},handleSearch:function(){this.isShowStatus.isMore=!1,this.$emit("getData")},selectChange:function(e){this.$emit("selectChange",e)},changeStatus:function(e){this.$emit("changeStatus",e)}}}},796:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var i=a(267),o=a.n(i);t.default={props:{mainHeight:{type:Number,default:713},isShowStatus:{type:Object},otherVariable:{type:Object},propData:{type:Array},tableData:{type:Array},isMulTable:{type:Boolean,default:!1},isMulCommonTable:{type:Boolean,default:!1},isCenter:{type:Boolean,default:!1},isSum:{type:Boolean,default:!1},sumParam:{type:Object,default:function(){return{digit:null,theoryWght:null}}},formTableData:{type:Array,default:function(){return[]}},formPropTable:{type:Array,default:function(){return[]}},tableHeight:{type:Number},isHasDbMethod:{type:Boolean,default:!1},isPureClickRow:{type:Boolean,default:!1},mainKey:{type:String,default:"fid"},isMulSelect:{type:Boolean,default:!1},isNotMulSelect:{type:Boolean,default:!0},isNotHandleSelect:{type:Boolean,default:!1}},data:function(){return{tableHeaderColor:{"background-color":"#f5f7fa"},isShowTop:!0,mulTableData:[],copyMulTableData:[],focusTimes:1,editIndex:0,load_status_list:[0,null,50]}},mounted:function(){this.initStatus()},methods:{initStatus:function(){this.mulTableData=this.giveState(this.formTableData),this.copyMulTableData=this.giveState(this.$lodash.cloneDeep(this.formTableData))},tableRowClassName:function(e){var t=e.row,a=e.rowIndex;t.index=a},handleDetail:function(e){this.$emit("handleDetail",e)},renderRow:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fid",i=void 0;i=this.tableData.find(function(t){return t[a]===e}),this.$nextTick(function(){i?(t.$refs.simpleTable.setCurrentRow(i),t.$emit("handleDetail",i)):t.$emit("getInitPage")})},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)},handleRowEdit:function(e){this.focusTimes=1,this.editIndex=this.$lodash.findIndex(this.mulTableData,[this.mainKey,e[this.mainKey]]),this.otherVariable.isReadTable||(this.otherVariable.isChildEdit=!0,this.mulTableData=this.giveState(this.mulTableData),e.isEditState=!0),this.otherVariable.isOtherTable&&this.$emit("handleOtherTable",e),this.isPureClickRow&&(this.$emit("pureClickRow",e,this.editIndex),this.isNotHandleSelect||this.$refs.multipletable.toggleRowSelection(e))},handleDblClick:function(e){this.isHasDbMethod&&this.$emit("handleDblClick",e)},changeCell:function(e){this.$emit("changeCell",e)},jumpToCell:function(t){var a=this;"down"===t?(this.editIndex+=1,this.editIndex>=this.mulTableData.length&&(this.editIndex=this.mulTableData.length-1)):(this.editIndex-=1,this.editIndex<0&&(this.editIndex=0)),this.$nextTick(function(){a.$refs.multipletable.setCurrentRow(a.mulTableData[a.editIndex]),e(".el-table__body-wrapper .el-input__inner")[a.editIndex].focus()})},showLabel:function(e,t){var a={label:"",value:""};return a=e.find(function(e){return e.value===t})||{label:"",value:""},a.label},sortAlpha:function(e,t,a){return e[a]>t[a]?1:e[a]<t[a]?-1:0},handleFocus:function(){var t=this;e(".el-table__body-wrapper .el-input__inner")[0].focus();var a=[].concat(o()(e(".el-table__body-wrapper .el-input__inner"))).length;e(".el-table__body-wrapper .el-input__inner").keyup(function(i){if(13===i.which){var o=e(this).parents(".is-center"),n=o.next().find(".el-input__inner");if(n.prop("disabled"))n=o.next().next().find(".el-input__inner"),n.focus();else if(n.focus(),t.focusTimes+=1,t.focusTimes>a){var r=void 0;r=t.mulTableData[t.editIndex],t.$emit("handleSaveChild",r,"edit")}}})},getSummaries:function(e){var t=(e.columns,e.data),a=[];if(this.isSum&&this.sumParam.digit&&this.sumParam.theoryWght){var i=null,o=null;t.length&&t.forEach(function(e,t){e.parentVariantId||(i+=Number(e.digit),o+=Number(e.theoryWght))}),a[0]="合计",a[this.sumParam.digit]=i,o&&(a[this.sumParam.theoryWght]=o.toFixed(3))}else a=[];return a},setCircle:function(e){return e>=0&&e<50?"red":e>=100?"green":50===e?"red":"none"},setCircleII:function(e){return 50===e?"yellow":"none"},toggleTop:function(e){this.isShowTop=e},cancelTop:function(){this.$emit("cancelTop")}}}}.call(t,a(85))},797:function(e,t,a){t=e.exports=a(656)(!0),t.push([e.i,".mixin-rowI[data-v-7016dbf5]{color:#333}.mixin-rowII[data-v-7016dbf5]{color:#888;display:flex;align-items:center}.current-row .mixin-rowII[data-v-7016dbf5]{color:#fff}.current-row:hover .mixin-rowII[data-v-7016dbf5]{color:#888}.top-tip[data-v-7016dbf5]{border:1px dotted red;padding-left:2px;padding-right:2px;line-height:1.2;display:inline-block;color:red;margin-left:10px;transform:scale(.88);font-size:12px}.statusCircle[data-v-7016dbf5]{width:10px;height:10px;border-radius:50%;margin-left:10px}.statusCircle.red[data-v-7016dbf5]{background:red}.statusCircle.green[data-v-7016dbf5]{background:green}.statusCircle.yellow[data-v-7016dbf5]{background:#ff0}.statusCircle.none[data-v-7016dbf5]{display:none}.statusCircleII[data-v-7016dbf5]{width:10px;height:10px;border-radius:50%;margin-left:5px}.statusCircleII.red[data-v-7016dbf5]{background:red}.statusCircleII.green[data-v-7016dbf5]{background:green}.statusCircleII.yellow[data-v-7016dbf5]{background:#ff0}.statusCircleII.none[data-v-7016dbf5]{display:none}","",{version:3,sources:["F:/pc_project/erp-aluminium/yunerp/src/components/CommonTable.vue"],names:[],mappings:"AACA,6BACE,UAAY,CACb,AACD,8BACE,WAAY,AACZ,aAAc,AACd,kBAAoB,CACrB,AACD,2CACE,UAAY,CACb,AACD,iDACE,UAAY,CACb,AACD,0BACE,sBAAuB,AACvB,iBAAkB,AAClB,kBAAmB,AACnB,gBAAiB,AACjB,qBAAsB,AACtB,UAAW,AACX,iBAAkB,AAClB,qBAAuB,AACvB,cAAgB,CACjB,AACD,+BACE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,gBAAkB,CACnB,AACD,mCACE,cAAgB,CACjB,AACD,qCACE,gBAAkB,CACnB,AACD,sCACE,eAAmB,CACpB,AACD,oCACE,YAAc,CACf,AACD,iCACE,WAAY,AACZ,YAAa,AACb,kBAAmB,AACnB,eAAiB,CAClB,AACD,qCACE,cAAgB,CACjB,AACD,uCACE,gBAAkB,CACnB,AACD,wCACE,eAAmB,CACpB,AACD,sCACE,YAAc,CACf",file:"CommonTable.vue",sourcesContent:["\n.mixin-rowI[data-v-7016dbf5] {\n  color: #333;\n}\n.mixin-rowII[data-v-7016dbf5] {\n  color: #888;\n  display: flex;\n  align-items: center;\n}\n.current-row .mixin-rowII[data-v-7016dbf5] {\n  color: #fff;\n}\n.current-row:hover .mixin-rowII[data-v-7016dbf5] {\n  color: #888;\n}\n.top-tip[data-v-7016dbf5] {\n  border: 1px dotted red;\n  padding-left: 2px;\n  padding-right: 2px;\n  line-height: 1.2;\n  display: inline-block;\n  color: red;\n  margin-left: 10px;\n  transform: scale(0.88);\n  font-size: 12px;\n}\n.statusCircle[data-v-7016dbf5] {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  margin-left: 10px;\n}\n.statusCircle.red[data-v-7016dbf5] {\n  background: red;\n}\n.statusCircle.green[data-v-7016dbf5] {\n  background: green;\n}\n.statusCircle.yellow[data-v-7016dbf5] {\n  background: yellow;\n}\n.statusCircle.none[data-v-7016dbf5] {\n  display: none;\n}\n.statusCircleII[data-v-7016dbf5] {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  margin-left: 5px;\n}\n.statusCircleII.red[data-v-7016dbf5] {\n  background: red;\n}\n.statusCircleII.green[data-v-7016dbf5] {\n  background: green;\n}\n.statusCircleII.yellow[data-v-7016dbf5] {\n  background: yellow;\n}\n.statusCircleII.none[data-v-7016dbf5] {\n  display: none;\n}\n"],sourceRoot:""}])},798:function(e,t,a){t=e.exports=a(656)(!0),t.push([e.i,".fade-enter-active[data-v-768fdcde],.fade-leave-active[data-v-768fdcde]{transition:opacity .5s}.fade-enter[data-v-768fdcde],.fade-leave-to[data-v-768fdcde]{opacity:0}","",{version:3,sources:["F:/pc_project/erp-aluminium/yunerp/src/components/CommonSearch.vue"],names:[],mappings:"AACA,wEAEE,sBAAwB,CACzB,AACD,6DAEE,SAAW,CACZ",file:"CommonSearch.vue",sourcesContent:["\n.fade-enter-active[data-v-768fdcde],\n.fade-leave-active[data-v-768fdcde] {\n  transition: opacity .5s;\n}\n.fade-enter[data-v-768fdcde],\n.fade-leave-to[data-v-768fdcde] {\n  opacity: 0;\n}\n"],sourceRoot:""}])},799:function(e,t,a){var i=a(797);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(657)("42cac76a",i,!0,{})},800:function(e,t,a){var i=a(798);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(657)("2c11e14a",i,!0,{})},801:function(e,t,a){function i(e){a(800)}var o=a(1)(a(795),a(804),i,"data-v-768fdcde",null);e.exports=o.exports},802:function(e,t,a){function i(e){a(799)}var o=a(1)(a(796),a(803),i,"data-v-7016dbf5",null);e.exports=o.exports},803:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isMulTable?e._e():a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.isShowStatus.isMore,expression:"!isShowStatus.isMore"}],ref:"simpleTable",staticClass:"main-table",attrs:{height:e.tableHeight||e.mainHeight,"tooltip-effect":"dark",align:e.isCenter?"center":"left",border:"",data:e.tableData,"row-class-name":e.tableRowClassName,"highlight-current-row":"","max-height":.76*e.$store.state.screenHei,"header-cell-style":e.tableHeaderColor},on:{"row-click":e.handleDetail,"selection-change":e.handleSelectionChange}},[(e.otherVariable.isMulSelect||e.isMulSelect)&&e.isNotMulSelect?a("el-table-column",{attrs:{type:"selection",width:"40"}}):e._e(),e._v(" "),e._l(e.propData,function(t,i){return e.isMulCommonTable?e._e():["normal"===t.type&&!t.isMain&&!t.disabledInput||"first"===t.type?a("el-table-column",{attrs:{fixed:t.fixed,align:t.align,label:t.name,width:t.width,sortable:t.sortable,"sort-method":function(a,i){return e.sortAlpha(a,i,t.prop)},"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("span",[e._v(e._s(i.row[t.prop]))])]}}])}):e._e(),e._v(" "),"number"!==t.type||t.isMain?e._e():a("el-table-column",{attrs:{label:t.name,align:t.align,width:t.width,sortable:t.sortable,"sort-method":function(a,i){return e.sortAlpha(a,i,t.prop)},"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("span",[e._v(e._s(i.row[t.prop]))])]}}])}),e._v(" "),"select"!==t.type||t.disabledInput?e._e():a("el-table-column",{attrs:{label:t.name,align:t.align,width:t.width,sortable:t.sortable,"sort-method":function(a,i){return e.sortAlpha(a,i,t.prop)},"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("span",[e._v(e._s(e.showLabel(t.selectList,i.row[t.prop])))])]}}])}),e._v(" "),"mixinNormal"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,align:t.align,width:t.width,"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1]))]),e._v(" "),a("div",{staticClass:"mixin-rowII"},[e._v(" "+e._s(i.row[t.prop2]))])]}}])}):e._e(),e._v(" "),"mixinVoucher"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,align:t.align,width:t.width,"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1]))]),e._v(" "),a("div",{staticClass:"mixin-rowII"},[e._v(" "+e._s("0"==i.row[t.prop2]?"未提交":"50"==i.row[t.prop2]?"已提交":"已审核"))])]}}])}):e._e(),e._v(" "),"mixinVouchers"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,align:t.align,width:t.width,"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1]))]),e._v(" "),a("div",{staticClass:"mixin-rowII"},[e._v(" "+e._s("1"==i.row[t.prop2]?"贷款":"2"==i.row[t.prop2]?"订金":"税金"))])]}}])}):e._e(),e._v(" "),"mixin"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,align:t.align,width:t.width,"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1]))]),e._v(" "),a("div",{staticClass:"mixin-rowII"},[e._v(" "+e._s("已审核"===i.row[t.prop2]?"待签批":i.row[t.prop2]))])]}}])}):e._e(),e._v(" "),"mixinStatus"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,align:t.align,width:t.width,"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1]))]),e._v(" "),a("div",{staticClass:"mixin-rowII"},[a("span",[e._v(" "+e._s("已提交"===i.row[t.prop2]?"待提交":"已确认"==i.row[t.prop2]?"已提交":i.row[t.prop2]))]),e._v(" "),t.hasCircleI?a("span",{staticClass:"statusCircle",class:e.setCircle(i.row[t.status])}):e._e(),e._v(" "),t.hasCircleII?a("span",{staticClass:"statusCircleII",class:e.setCircleII(i.row[t.status])}):e._e()])]}}])}):e._e(),e._v(" "),"mixinTop"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,align:t.align,width:t.width,"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1])),i.row.isTop?a("span",{staticClass:"top-tip",on:{mouseover:function(t){e.toggleTop(!1)},mouseout:function(t){e.toggleTop(!0)},click:e.cancelTop}},[e._v(e._s(e.isShowTop?"置顶":"取消"))]):e._e()]),e._v(" "),a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop2]))])]}}])}):e._e(),e._v(" "),"modelInput"===t.type?a("el-table-column",{attrs:{label:t.name,align:t.align,width:t.width,align:"center","show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",[e._v(e._s(0===i.row[t.prop]?"×":1===i.row[t.prop]?"√":""))])]}}])}):e._e(),e._v(" "),"voucherInput"===t.type?a("el-table-column",{attrs:{label:t.name,align:t.align,width:t.width,align:"center","show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",[e._v(e._s(100===i.row[t.prop]?"√":""))])]}}])}):e._e(),e._v(" "),"visits"===t.type?a("el-table-column",{attrs:{label:t.name,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",[e._v(e._s(0===i.row[t.prop]?"待拜访":50===i.row[t.prop]?"拜访中":"已完成"))])]}}])}):e._e(),e._v(" "),"client"===t.type?a("el-table-column",{attrs:{label:t.name,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",[e._v(e._s("1"===i.row[t.prop]?"普通客户":"2"===i.row[t.prop]?"分销商":"经销商"))])]}}])}):e._e(),e._v(" "),"sell"===t.type?a("el-table-column",{attrs:{label:t.name,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",[e._v(e._s(1===i.row[t.prop]?"国内":2===i.row[t.prop]?"出口":""))])]}}])}):e._e(),e._v(" "),"doctypes"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1]))]),e._v(" "),a("div",{staticClass:"mixin-rowII"},[e._v(" "+e._s(0==i.row[t.prop2]?"潜在机会":"落实机会"))])]}}])}):e._e(),e._v(" "),"export_list"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1]))]),e._v(" "),a("div",{staticClass:"mixin-rowII"},[e._v(" "+e._s(0==i.row[t.prop2]?"未确定":50==i.row[t.prop2]?"已确定":100==i.row[t.prop2]?"已审核":""))])]}}])}):e._e(),e._v(" "),"is_check_price"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1]))]),e._v(" "),0===i.row[t.prop2]||null===i.row[t.prop2]?a("div",{staticClass:"mixin-rowII"},[e._v("未提交")]):e._e(),e._v(" "),50===i.row[t.prop2]?a("div",{staticClass:"mixin-rowII"},[e._v("已提交")]):e._e(),e._v(" "),100===i.row[t.prop2]?a("div",{staticClass:"mixin-rowII"},[e._v("已审核")]):e._e()]}}])}):e._e(),e._v(" "),"is_load"===t.type?a("el-table-column",{attrs:{label:t.name1+t.name2,width:t.width,align:t.align},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"mixin-rowI"},[e._v(" "+e._s(i.row[t.prop1]))]),e._v(" "),e.load_status_list.includes(i.row[t.prop2])?a("div",{staticClass:"mixin-rowII"},[e._v("未提交")]):e._e(),e._v(" "),100===i.row[t.prop2]?a("div",{staticClass:"mixin-rowII"},[e._v("已提交")]):e._e(),e._v(" "),100===i.row[t.prop2]||e.load_status_list.includes(i.row[t.prop2])?e._e():a("div",{staticClass:"mixin-rowII"},[e._v(e._s(i.row.docStatusName))])]}}])}):e._e()]}),e._v(" "),e._l(e.propData,function(t,i){return e.isMulCommonTable?[a("el-table-column",{attrs:{label:t.name+(t.unit?t.unit:""),align:t.align,width:t.width,"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return["normal"===t.type?a("div",{attrs:{align:t.align}},[t.rule||t.isCellEdit?e._e():a("span",[e._v(e._s(i.row[t.prop]))]),e._v(" "),"limitLength"===t.rule?a("span",[e._v(e._s(i.row[t.prop]?parseFloat(i.row[t.prop]).toFixed(3):0))]):e._e()]):e._e(),e._v(" "),"select"===t.type?a("div",{attrs:{align:t.align}},[a("span",[e._v(e._s(e.showLabel(t.selectList,i.row[t.prop])))])]):e._e(),e._v(" "),"checkbox"===t.type?a("div",{attrs:{align:t.align}},[a("span",[e._v(e._s("true"===i.row[t.prop]?"✔":"×"))])]):e._e(),e._v(" "),"sell"===t.type?a("div",{attrs:{align:t.align}},[a("span",[e._v(e._s(1===i.row[t.prop]?"国内":2===i.row[t.prop]?"出口":""))])]):e._e()]}}])},[e._l(t.children,function(i){return t.children.length?[a("el-table-column",{attrs:{label:i.name,align:i.align,width:i.width,"show-overflow-tooltip":!i.isShort},scopedSlots:e._u([{key:"default",fn:function(t){return["normal"===i.type?a("span",[e._v(e._s(t.row[i.prop]))]):e._e(),e._v(" "),"checkbox"===i.type?a("span",[e._v(e._s("true"===t.row[i.prop]?"✔":"×"))]):e._e()]}}])},[e._l(i.children,function(t){return i.children.length?[a("el-table-column",{attrs:{prop:t.prop,label:t.name,align:t.align,width:t.width,"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[a("span",[e._v(e._s(i.row[t.prop]))])]}}])})]:e._e()})],2)]:e._e()})],2)]:e._e()}),e._v(" "),e._t("operate-btn")],2),e._v(" "),e.isMulTable?a("el-table",{ref:"multipletable",attrs:{"tooltip-effect":"dark","show-summary":e.isSum,"summary-method":e.getSummaries,border:"",data:e.mulTableData,height:e.tableHeight||.6*e.$store.state.screenHei,"highlight-current-row":"","header-cell-style":e.tableHeaderColor},on:{"row-click":e.handleRowEdit,"row-dblclick":e.handleDblClick,"selection-change":e.handleSelectionChange}},[(e.otherVariable.isMulSelect||e.isMulSelect)&&e.isNotMulSelect?a("el-table-column",{attrs:{type:"selection",width:"40"}}):e._e(),e._v(" "),e._l(e.formPropTable,function(t){return[a("el-table-column",{attrs:{label:t.name+(t.unit?t.unit:""),align:t.align?t.align:"left",width:t.width,"show-overflow-tooltip":!t.isShort,prop:"digit"==t.prop?"digit":"theoryWght"==t.prop?"theoryWght":""},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.isEditState||t.rule||t.isCellEdit?e._e():a("span",{staticClass:"num-cell-r"},[e._v(e._s(i.row[t.prop]))]),e._v(" "),i.row.isEditState||t.rule||!t.isCellEdit?e._e():a("el-input",{nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;e.jumpToCell("down")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;e.jumpToCell("up")}],keyup:function(a){e.changeCell(t.prop)}},model:{value:i.row[t.prop],callback:function(a){e.$set(i.row,t.prop,a)},expression:"scope.row[item.prop]"}}),e._v(" "),i.row.isEditState||"limitLength"!==t.rule?e._e():a("span",{staticClass:"num-cell-r"},[e._v(e._s(i.row[t.prop]?parseFloat(i.row[t.prop]).toFixed(3):0))]),e._v(" "),i.row.isEditState&&"select"!==t.type?a("el-input",{model:{value:i.row[t.prop],callback:function(a){e.$set(i.row,t.prop,a)},expression:"scope.row[item.prop]"}}):e._e(),e._v(" "),i.row.isEditState||"keepLength"!==t.rule?e._e():a("span",{staticClass:"num-cell-r"},[e._v(e._s(i.row[t.prop]?parseFloat(i.row[t.prop]).toFixed(3):0))]),e._v(" "),i.row.isEditState&&"keepNum"!==t.type?a("el-input",{model:{value:i.row[t.prop],callback:function(a){e.$set(i.row,t.prop,a)},expression:"scope.row[item.prop]"}}):e._e()]}}])},[e._l(t.children,function(i){return t.children.length?[a("el-table-column",{attrs:{label:i.name,align:i.align?i.align:"left",width:i.width,"show-overflow-tooltip":!i.isShort},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditState||"normal"!==i.type||"limitLength"===i.rule?e._e():a("span",{class:i.className},[e._v(e._s(t.row[i.prop]))]),e._v(" "),t.row.isEditState||"normal"!==i.type||"limitLength"!==i.rule?e._e():a("span",{staticClass:"num-cell-r"},[e._v(e._s(t.row[i.prop]?parseFloat(t.row[i.prop]).toFixed(3):0))]),e._v(" "),t.row.isEditState&&"normal"===i.type?a("el-input",{model:{value:t.row[i.prop],callback:function(a){e.$set(t.row,i.prop,a)},expression:"scope.row[i.prop]"}}):e._e(),e._v(" "),t.row.isEditState||"checkbox"!==i.type?e._e():a("span",[e._v(e._s("true"===t.row[i.prop]?"✔":"×"))]),e._v(" "),t.row.isEditState&&"checkbox"===i.type?a("el-checkbox",{attrs:{"true-label":"true","false-label":"false"},model:{value:t.row[i.prop],callback:function(a){e.$set(t.row,i.prop,a)},expression:"scope.row[i.prop]"}}):e._e()]}}])},[e._l(i.children,function(t){return i.children.length?[a("el-table-column",{attrs:{label:t.name,align:t.align?t.align:"left",width:t.width,"show-overflow-tooltip":!t.isShort},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.isEditState?e._e():a("span",[e._v(e._s(i.row[t.prop]))]),e._v(" "),i.row.isEditState&&"select"!==t.type?a("el-input",{model:{value:i.row[t.prop],callback:function(a){e.$set(i.row,t.prop,a)},expression:"scope.row[s.prop]"}}):e._e()]}}])})]:e._e()})],2)]:e._e()})],2)]}),e._v(" "),e._t("operate-btn")],2):e._e()],1)},staticRenderFns:[]}},804:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"common-search-wrap"},[e._l(e.propData,function(t,i){return[t.isMainSearch?a("el-input",{staticClass:"search-input",style:{width:e.inputWidth},attrs:{placeholder:t.placeholder},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,"string"==typeof a?a.trim():a)},expression:"searchForm[item.prop]"}}):e._e()]}),e._v(" "),a("el-button",{staticClass:"search-more",on:{click:e.toggleSearch}},[a("span",[e._v("更多查询")]),e._v(" "),a("i",{staticClass:"el-icon--right",class:e.isShowStatus.isMore?"el-icon-arrow-up":"el-icon-arrow-down"})]),e._v(" "),e._t("search-other-btn")],2),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowStatus.isMore,expression:"isShowStatus.isMore"}],staticClass:"common-more-search"},[a("el-form",{class:e.isInLine?"inline-form-add":"",attrs:{model:e.searchForm,"label-width":"120px",inline:e.isInLine},nativeOn:{submit:function(e){e.preventDefault()},keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}}},[e._l(e.propData,function(t,i){return[t.isMainSearch||t.isMain||t.showRemark?e._e():a("el-form-item",{attrs:{label:t.name}},["normal"===t.type?a("el-input",{model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,"string"==typeof a?a.trim():a)},expression:"searchForm[item.prop]"}}):e._e(),e._v(" "),"number"===t.type?a("el-input",{model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,"string"==typeof a?a.trim():a)},expression:"searchForm[item.prop]"}}):e._e(),e._v(" "),"select"===t.type?a("el-select",{staticStyle:{width:"100%"},model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,a)},expression:"searchForm[item.prop]"}},e._l(t.selectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1):e._e(),e._v(" "),"selectChange"===t.type?a("el-select",{staticStyle:{width:"100%"},on:{change:e.selectChange},model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,a)},expression:"searchForm[item.prop]"}},e._l(t.selectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1):e._e(),e._v(" "),"changeStatus"===t.type?a("el-select",{staticStyle:{width:"100%"},on:{change:e.changeStatus},model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,a)},expression:"searchForm[item.prop]"}},e._l(t.selectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1):e._e(),e._v(" "),"date"===t.type?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,a)},expression:"searchForm[item.prop]"}}):e._e(),e._v(" "),"checkbox"==t.type?a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.searchForm[t.prop],callback:function(a){e.$set(e.searchForm,t.prop,a)},expression:"searchForm[item.prop]"}}):e._e(),e._v(" "),"mixincheckbox"==t.type?[a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.searchForm[t.prop1],callback:function(a){e.$set(e.searchForm,t.prop1,a)},expression:"searchForm[item.prop1]"}},[e._v(e._s(t.name1))]),e._v(" "),a("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:e.searchForm[t.prop2],callback:function(a){e.$set(e.searchForm,t.prop2,a)},expression:"searchForm[item.prop2]"}},[e._v(e._s(t.name2))])]:e._e()],2)]}),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:" "}},[a("el-button",{on:{click:function(t){e.isShowStatus.isMore=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"btn-cyan search-btn",on:{click:e.handleSearch}},[e._v("查询")])],1)],2)],1)])],1)},staticRenderFns:[]}},805:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{pageObj:{type:Object}},data:function(){return{}},methods:{handleSize:function(e){this.pageObj.commonSize=e,this.$emit("getData")},handleCurrent:function(e){this.pageObj.commonPage=e,this.$emit("getData")}}}},806:function(e,t,a){var i=a(1)(a(805),a(807),null,null,null);e.exports=i.exports},807:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-pagination",{staticClass:"common-pagination",attrs:{"pager-count":5,"current-page":e.pageObj.commonPage,"page-size":e.pageObj.commonSize,"page-sizes":e.pageObj.commonSizes,layout:"total, sizes, prev, pager, next",total:e.pageObj.commonTotal},on:{"size-change":e.handleSize,"current-change":e.handleCurrent}})},staticRenderFns:[]}},830:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{isShowStatus:{type:Object},otherVariable:{type:Object},propData:{type:Array},detailForm:{type:Object},hasSimpleHead:{type:Boolean,default:!1},headHeight:{type:String,default:"120px"},marginTop:{type:String,default:"10px"}},data:function(){return{isSpread:!1}},mounted:function(){this.otherVariable.contentHead=this.$refs.contentHead.offsetHeight},methods:{toggleSpread:function(){this.$emit("toggleSpread"),this.isSpread=this.otherVariable.isSpread},handleEdit:function(){this.$emit("handleEdit")},handleDelete:function(){this.$emit("handleDelete")},selectChange:function(e,t){this.$emit("selectChange",e,t)}}}},834:function(e,t,a){var i=a(1)(a(830),a(836),null,null,null);e.exports=i.exports},836:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-right-wrap"},[e._t("header",[e._v(" ")]),e._v(" "),a("div",{staticClass:"common-right-content"},[e.otherVariable.isHeadComplex?e._e():a("div",{staticClass:"content-head",style:{height:e.headHeight}},[a("span",[e._v(e._s(e.otherVariable.detailTitle))]),e._v(" "),e._t("main-btn-wrap")],2),e._v(" "),e.otherVariable.isHeadComplex?a("div",{ref:"contentHead",staticClass:"content-head-x",class:e.hasSimpleHead?"content-head-simple":""},[e._t("head-form-title"),e._v(" "),e._t("head-form-content"),e._v(" "),e._t("main-btn-wrap")],2):e._e(),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.isSpread,expression:"!isSpread"}],staticClass:"icon-spread",on:{click:e.toggleSpread}}),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.isSpread,expression:"isSpread"}],staticClass:"icon-retract",on:{click:e.toggleSpread}}),e._v(" "),e._t("model-input"),e._v(" "),a("div",{staticClass:"content-detail"},[e.otherVariable.isFormComplex?e._e():a("div",{staticClass:"content-read-form",style:{"margin-top":e.marginTop}},[a("el-form",{attrs:{model:e.detailForm,"label-width":"120px",inline:e.otherVariable.isInlineForm}},[e._l(e.propData,function(t,i){return["title"===t.type?a("div",{staticClass:"inline-form-title",style:{width:t.width||"80px"}},[e._v(e._s(t.name))]):e._e(),e._v(" "),t.isMain?e._e():a("el-form-item",{class:t.isLong?"full-remark":"",attrs:{label:t.name}},["normal"===t.type?a("el-input",{attrs:{readonly:!0},model:{value:e.detailForm[t.prop],callback:function(a){e.$set(e.detailForm,t.prop,"string"==typeof a?a.trim():a)},expression:"detailForm[item.prop]"}}):e._e(),e._v(" "),"select"===t.type?a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!0},model:{value:e.detailForm[t.prop],callback:function(a){e.$set(e.detailForm,t.prop,a)},expression:"detailForm[item.prop]"}},e._l(t.selectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1):e._e(),e._v(" "),"selectChange"===t.type?a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isShowStatus.isRead||t.isRead},on:{change:function(a){e.selectChange(a,t.selectParam)}},model:{value:e.detailForm[t.prop],callback:function(a){e.$set(e.detailForm,t.prop,a)},expression:"detailForm[item.prop]"}},e._l(t.selectList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1):e._e(),e._v(" "),"date"===t.type?a("el-input",{attrs:{readonly:!0},model:{value:e.detailForm[t.prop],callback:function(a){e.$set(e.detailForm,t.prop,"string"==typeof a?a.trim():a)},expression:"detailForm[item.prop]"}}):e._e()],1)]})],2)],1),e._v(" "),e.otherVariable.isFormComplex?a("div",{staticClass:"content-read-form-x",style:{"margin-top":e.marginTop}},[e._t("common-content")],2):e._e()])],2)],2)},staticRenderFns:[]}},849:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){t.default={data:function(){return{isEnter:!1}},props:{},methods:{selectEnterEvent:function(){var e=this;++this.enterTimes>=2&&this.isBanNextFocus&&this.$nextTick(function(){e.nextFocus()})},remoteEnterEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];if(this.isEnter=!0,++this.enterTimes>=2)switch(t){case"matCode":this.setMatCode(e);break;case"cx1Name":this.setColorCode(e);break;case"cx2Name":this.setMatAlloy(e);break;case"cx3Name":this.setMatThick(e);break;case"usrTxt2Name":this._setUsrTxt2()}},tabEvent:function(e,t){switch(t){case"matCode":this.setMatCode(this.firstMatCode);break;case"cx1Name":this.setColorCode(this.firstColorName);break;case"cx2Name":this.setMatAlloy(this.firstMatAlloy);break;case"cx3Name":this.setMatThick(this.firstMatThick)}},blurEvent:function(e,t){},handleCtrlV:function(e,t){var a=this;this.$nextTick(function(){var i=e.target.value;switch(t){case"matCode":a.getMatCodeList(i,i,null,1);break;case"cx1Name":a.getColorCodeList(i,i,null,1);break;case"cx2Name":a.getMatAlloy(i,i,null,1);break;case"cx3Name":a.getMatThick(i,i,null,1)}})},banNextFocus:function(e){this.isBanNextFocus=e},setFocus:function(e){this.isEnter=!1,this.currentIndex=e},nextFocus:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"该项";if(!t||!!i){var n=this.$el.querySelectorAll("[data-index]");if(n.length>this.currentIndex){var r=n.item(++this.currentIndex);null!==r&&this.$nextTick(function(){a.autoFocus(r)})}else console.log("reset this.currentIndex")}else this.$message({message:o+"不能为空",type:"warning"})},autoFocus:function(e){var t=e;-1===["INPUT","TEXTAREA"].indexOf(e.tagName.toUpperCase())&&(t=e.querySelector("input,textarea")),t&&t.focus()},goUp:function(e){this.handleSaveChild(e,"up")},goDown:function(e){this.tabDataI[this.editIndex].variantId&&this.handleSaveChild(e,"down")},goTemp:function(t,a){"down"===a?(this.editIndex+=1,this.editIndex<this.tabDataI.length?(this.tabDataI[this.editIndex-1].isEditState=!1,this.tabDataI[this.editIndex].isEditState=!0,this.$refs.childTable.setCurrentRow(this.tabDataI[this.editIndex]),this.clickDetail(this.tabDataI[this.editIndex]),this.$nextTick(function(){e(".el-table__body-wrapper .el-input__inner")[t].focus()})):(this.editIndex=this.tabDataI.length-1,this.otherVariable.isChildEdit=!1)):"up"===a?(this.editIndex-=1,this.editIndex<0?(this.editIndex=0,this.isAddDetail?this.handleAddChild():this.handleCancelChild()):(this.tabDataI[this.editIndex+1].isEditState=!1,this.tabDataI[this.editIndex].isEditState=!0,this.clickDetail(this.tabDataI[this.editIndex]),this.$refs.childTable.setCurrentRow(this.tabDataI[this.editIndex]),this.$nextTick(function(){e(".el-table__body-wrapper .el-input__inner")[t].focus()}))):"first"===a&&(this.editIndex=0,this.isAddDetail?this.handleAddChild():this.handleCancelChild())},handleLastCell:function(e){13===e.keyCode&&this.handleSaveChild(0,"first"),9!==e.keyCode||e.shiftKey||(e.returnValue=!1,this.handleSaveChild(0,"first"))},listenScroll:function(){var e=this,t=this.$refs.childTable.$el.querySelector(".el-table__body-wrapper");t.addEventListener("scroll",function(){e.scrollHeight=t.scrollTop})},changeSize:function(){var e=this;this.isResize=!1,this.tableHeight=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-154,this.mainHeight=window.innerHeight-214,this.$nextTick(function(){e.isResize=!0})},listenResize:function(){var e=this;window.onresize=function(){e.changeSize()}},changeSizeII:function(){var e=this;this.isResize=!1,this.formHeight=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-154,this.tableHeight=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-154,this.mainHeight=window.innerHeight-214,this.$nextTick(function(){e.isResize=!0})},listenResizeII:function(){var e=this;window.onresize=function(){e.changeSizeII()}},changeSizeIII:function(){var e=this;this.isResize=!1,this.showTable?this.tableHeightI=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-304:this.tableHeightI=window.innerHeight-this.$refs.headForm.offsetHeight-this.otherVariable.contentHead-154,this.mainHeight=window.innerHeight-214,this.$nextTick(function(){e.isResize=!0})},listenResizeIII:function(){var e=this;window.onresize=function(){e.changeSizeIII()}},toggleSpread:function(){this.otherVariable.isSpread=!this.otherVariable.isSpread,this.otherVariable.isSpread?this.otherVariable.contentWidth=100:this.otherVariable.contentWidth=this.tempWidth},notShowTip:function(e){e?(localStorage.setItem("isShowDetailBan",!0),this.$store.state.isShowDetailBan=!0):(localStorage.setItem("isShowDetailBan",!1),this.$store.state.isShowDetailBan=!1)}}}}.call(t,a(85))},850:function(e,t,a){var i=a(1)(a(849),null,null,null,null);e.exports=i.exports}});
//# sourceMappingURL=63.9a2e6d8073742b4a11d3.js.map