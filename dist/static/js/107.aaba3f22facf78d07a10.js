webpackJsonp([107],{1197:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{aluPage:1,aluSize:10,aluTotal:0,tableId:"",searchForm:{beginDate:null,endDate:null},selectIndex:0,aluList:[],allAluList:[],aloneData:[],tableData:[],seriesList:[],nameList:[],priceCode:null,priceName:null,lineStyle:{normal:{width:3,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:10,shadowOffsetY:10}},selected:{},currentTypeList:[],matTypeNameList:[],uomList:[],currentType:"人民币",addVisible:!1,dialog_top:"80px",addForm:{},aluPriceList:[]}},mounted:function(){this.getPriceList(),this.getCurrentType(),this.getMatCode(),this.getUomList()},methods:{getPriceList:function(){var e=this;this.aluList=[];var t=[];this.allAluList=[],this.fetch("oms/pqm/PqmPriceListController/selectPriceListNoPage",{listType:"胶条价目",inActive:0}).then(function(a){200===a.status&&a.data&&(e.aluList=a.data,t=e.$lodash.cloneDeep(a.data),t.unshift({fname:"全部胶条价目",fCode:""}),e.allAluList=t,e.selectItem(0,e.allAluList[0]))})},getTableData:function(){var e=this;this.tableData=[],this.aloneData=[],this.seriesList=[],this.selected={},this.fetch("/oms/pqm/PqmMatPriceController/selectPriceList?pageNo="+this.aluPage+"&pageSize="+this.aluSize,{beginDate:this.searchForm.beginDate,endDate:this.searchForm.endDate,priceListCode:this.priceCode,currency:this.currentType}).then(function(t){200===t.status&&t.data&&(e.tableData=t.data.list,e.aluTotal=t.data.total)})},handleSize:function(e){this.aluSize=e,this.getTableData()},handleCurrent:function(e){this.aluPage=e,this.getTableData()},getCurrentType:function(){var e=this;this.currentTypeList=[],this.getAjax("/oms/sys/DataDictionary/getCurrencyType").then(function(t){200===t.status&&(t.data.forEach(function(e){e.dictvalue=Number(e.dictvalue)}),e.currentTypeList=t.data)})},getMatCode:function(){var e=this;this.matTypeNameList=[],this.fetch("/oms/mat/MatTypeController/selectMatTypeList",{inactive:0}).then(function(t){200===t.status&&(e.matTypeNameList=t.data)})},getUomList:function(){var e=this;this.uomList=[],this.getAjax("/basedata/sys/DataDictionary/getDataDictionary?docCode=30126",{}).then(function(t){t.data?e.uomList=t.data:e.uomList=[]})},changeCurrentType:function(e){this.currentType=e.target.value,this.aluPage=1,this.aluSize=10,this.getTableData()},changeType:function(e){var t=void 0;e?(t=this.currentTypeList.find(function(t){return t.dicttext===e}),this.addForm.currencyName=t.dicttext):this.addForm.currencyName=""},matType:function(e){var t=void 0;e?(t=this.matTypeNameList.find(function(t){return t.fname===e}),this.addForm.matTypeCode=t.fcode):this.addForm.matTypeCode=""},getPricepvc:function(e){var t=this;this.aluPriceList=[],this.fetch("/oms/pqm/PqmPriceListController/selectPriceListNoPage?pageSize=100",{priceListCode:e,listType:"胶条价目",inActive:0}).then(function(e){200===e.status&&(t.aluPriceList=e.data)})},handleSearch:function(){this.aluPage=1,this.aluSize=10,this.getTableData()},handleRefresh:function(){this.currentType="人民币",this.searchForm.beginDate=null,this.searchForm.endDate=null,this.getPriceList()},selectItem:function(e,t){this.aluPage=1,this.aluSize=10,this.priceCode=t.fcode,this.priceName=t.fname,this.selectIndex=e,this.getTableData()},openDialog:function(){this.addVisible=!0},closeDialog:function(){this.addVisible=!1,this.addForm={}},confirmDialog:function(){var e=this;this.fetch("/oms/pqm/PqmMatPriceController/addMatPrice",this.addForm).then(function(t){200===t.status?(e.$message({message:t.message,type:"success"}),e.addVisible=!1,e.getTableData()):e.$message({message:e.returnErrorMsg(t.error),type:"error"})})}}}},1367:function(e,t,a){t=e.exports=a(656)(!0),t.push([e.i,".price-alu-list[data-v-9aa908bc]{width:180px;margin-right:20px;background:#fff}.price-alu-list .list-head[data-v-9aa908bc]{color:#fff;font-size:16px;background:#3eb68f;height:60px;display:flex;align-items:center;justify-content:center}.price-alu-list .list-item[data-v-9aa908bc]{display:flex;justify-content:space-between;height:60px;padding-left:10px;cursor:pointer;font-size:16px}.price-alu-list .list-item div[data-v-9aa908bc]:first-child{display:flex;justify-content:center;align-items:center}.price-alu-list .list-item div[data-v-9aa908bc]:last-child{width:20px;display:flex;align-items:center}.price-alu-list .active-item[data-v-9aa908bc]{color:#fff;background:#76cbb0}.alu-price-pagination[data-v-9aa908bc]{margin-top:10px}.color-green[data-v-9aa908bc]{color:green}.color-red[data-v-9aa908bc]{color:red}.price-alu-right[data-v-9aa908bc]{width:100%;display:flex;flex-direction:column}.price-alu-right .alu-chart-wrap[data-v-9aa908bc]{width:100%}.price-alu-right .alu-chart-wrap .chart-div[data-v-9aa908bc]{width:100%;height:300px;background:#fff}.price-alu-right .alu-table-wrap[data-v-9aa908bc]{width:90%}.price-alu-right .alu-table-wrap .alu-table-head[data-v-9aa908bc]{display:flex;justify-content:space-between}.price-alu-right .alu-table-wrap .alu-head-select[data-v-9aa908bc]{display:flex;justify-content:center;align-items:center}.price-alu-right h3[data-v-9aa908bc]{border-bottom:3px solid #04c371;margin-bottom:10px;width:100px}","",{version:3,sources:["F:/pc_project/erp-aluminium/yunerp/src/page/erp_pc/erp_price/price_mana/price_pvc.vue"],names:[],mappings:"AACA,iCACE,YAAa,AACb,kBAAmB,AACnB,eAAiB,CAClB,AACD,4CACE,WAAY,AACZ,eAAgB,AAChB,mBAAoB,AACpB,YAAa,AACb,aAAc,AACd,mBAAoB,AACpB,sBAAwB,CACzB,AACD,4CACE,aAAc,AACd,8BAA+B,AAC/B,YAAa,AACb,kBAAmB,AACnB,eAAgB,AAChB,cAAgB,CACjB,AACD,4DACE,aAAc,AACd,uBAAwB,AACxB,kBAAoB,CACrB,AACD,2DACE,WAAY,AACZ,aAAc,AACd,kBAAoB,CACrB,AACD,8CACE,WAAY,AACZ,kBAAoB,CACrB,AACD,uCACE,eAAiB,CAClB,AACD,8BACE,WAAa,CACd,AACD,4BACE,SAAW,CACZ,AACD,kCACE,WAAY,AACZ,aAAc,AACd,qBAAuB,CACxB,AACD,kDACE,UAAY,CACb,AACD,6DACE,WAAY,AACZ,aAAc,AACd,eAAiB,CAClB,AACD,kDACE,SAAW,CACZ,AACD,kEACE,aAAc,AACd,6BAA+B,CAChC,AACD,mEACE,aAAc,AACd,uBAAwB,AACxB,kBAAoB,CACrB,AACD,qCACE,gCAAiC,AACjC,mBAAoB,AACpB,WAAa,CACd",file:"price_pvc.vue",sourcesContent:["\n.price-alu-list[data-v-9aa908bc] {\n  width: 180px;\n  margin-right: 20px;\n  background: #fff;\n}\n.price-alu-list .list-head[data-v-9aa908bc] {\n  color: #fff;\n  font-size: 16px;\n  background: #3eb68f;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.price-alu-list .list-item[data-v-9aa908bc] {\n  display: flex;\n  justify-content: space-between;\n  height: 60px;\n  padding-left: 10px;\n  cursor: pointer;\n  font-size: 16px;\n}\n.price-alu-list .list-item div[data-v-9aa908bc]:first-child {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.price-alu-list .list-item div[data-v-9aa908bc]:last-child {\n  width: 20px;\n  display: flex;\n  align-items: center;\n}\n.price-alu-list .active-item[data-v-9aa908bc] {\n  color: #fff;\n  background: #76cbb0;\n}\n.alu-price-pagination[data-v-9aa908bc] {\n  margin-top: 10px;\n}\n.color-green[data-v-9aa908bc] {\n  color: green;\n}\n.color-red[data-v-9aa908bc] {\n  color: red;\n}\n.price-alu-right[data-v-9aa908bc] {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.price-alu-right .alu-chart-wrap[data-v-9aa908bc] {\n  width: 100%;\n}\n.price-alu-right .alu-chart-wrap .chart-div[data-v-9aa908bc] {\n  width: 100%;\n  height: 300px;\n  background: #fff;\n}\n.price-alu-right .alu-table-wrap[data-v-9aa908bc] {\n  width: 90%;\n}\n.price-alu-right .alu-table-wrap .alu-table-head[data-v-9aa908bc] {\n  display: flex;\n  justify-content: space-between;\n}\n.price-alu-right .alu-table-wrap .alu-head-select[data-v-9aa908bc] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.price-alu-right h3[data-v-9aa908bc] {\n  border-bottom: 3px solid #04C371;\n  margin-bottom: 10px;\n  width: 100px;\n}\n"],sourceRoot:""}])},1498:function(e,t,a){var i=a(1367);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(657)("745da8d5",i,!0,{})},1712:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"common-wrap"},[a("div",{staticClass:"price-alu-list"},[a("div",{staticClass:"list-head"},[e._v("胶条价目")]),e._v(" "),e._l(e.allAluList,function(t,i){return a("div",{key:i,staticClass:"list-item",class:e.selectIndex===i?"active-item":"",on:{click:function(a){e.selectItem(i,t)}}},[a("div",[e._v(e._s(t.fname))]),e._v(" "),e._m(0,!0)])})],2),e._v(" "),a("div",{staticClass:"price-alu-right"},[a("div",{staticClass:"alu-search-wrap"},[a("el-form",{attrs:{model:e.searchForm,inline:!0}},[a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择生效日期"},model:{value:e.searchForm.beginDate,callback:function(t){e.$set(e.searchForm,"beginDate",t)},expression:"searchForm.beginDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"至"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择失效日期"},model:{value:e.searchForm.endDate,callback:function(t){e.$set(e.searchForm,"endDate",t)},expression:"searchForm.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:" "}},[a("el-button",{staticClass:"btn-cyan",on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"btn-cyan",on:{click:e.handleRefresh}},[e._v("重置")]),e._v(" "),a("el-button",{staticClass:"btn-cyan",on:{click:e.openDialog}},[e._v("新增")])],1)],1),e._v(" "),a("div",{staticClass:"alu-head-select"},[a("span",[e._v("货币：")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.currentType,expression:"currentType"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.currentType=t.target.multiple?a:a[0]},e.changeCurrentType]}},e._l(e.currentTypeList,function(t){return a("option",{domProps:{value:t.dicttext}},[e._v(e._s(t.dicttext))])}),0)])],1),e._v(" "),a("div",{staticClass:"alu-table-wrap"},[a("el-table",{attrs:{data:e.tableData,height:.67*e.$store.state.screenHei}},[a("el-table-column",{attrs:{align:"center",prop:"priceListCode",label:"价目表代码"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"matCode",label:"物料分组代码"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"matTypeName",label:"物料类型"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"matTypeCode",label:"物料代码"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"uom",label:"计量单位"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"beginDate",label:"生效日期"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"endDate",label:"失效日期"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"currencyName",label:"货币"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"price",label:"价格"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"taxPrice",label:"含税价格"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"memo",label:"说明"}})],1),e._v(" "),a("el-pagination",{staticClass:"alu-price-pagination",attrs:{"pager-count":5,"current-page":e.aluPage,"page-size":e.aluSize,layout:"total, sizes, prev, pager, next",total:e.aluTotal},on:{"size-change":e.handleSize,"current-change":e.handleCurrent}})],1)]),e._v(" "),a("el-dialog",{staticClass:"dialogDiv dialogDivII",attrs:{"close-on-click-modal":!1,"show-close":!1,top:e.dialog_top,size:"large",visible:e.addVisible},on:{close:e.closeDialog,"update:visible":function(t){e.addVisible=t}}},[a("div",{staticClass:"slideContent"},[a("div",{staticClass:"leftDiv leftOffsetIII"},[a("el-button",{staticClass:"icon-setting-2 icon-close",on:{click:e.closeDialog}}),e._v(" "),a("el-button",{staticClass:"icon-setting-1 icon-confirm",on:{click:e.confirmDialog}})],1),e._v(" "),a("div",{directives:[{name:"drag1",rawName:"v-drag1"}],staticClass:"slideTop"},[e._v("新增胶条价目")]),e._v(" "),a("div",{staticClass:"slideMid inline-form-add"},[a("el-form",{staticStyle:{"text-align":"left"},attrs:{inline:!0,model:e.addForm,"label-width":"120px"}},[a("el-form-item",{attrs:{porp:"priceListCode",label:"价目表代码"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入价目表代码进行搜索",clearable:"",filterable:"",remote:"","remote-method":e.getPricepvc},model:{value:e.addForm.priceListCode,callback:function(t){e.$set(e.addForm,"priceListCode","string"==typeof t?t.trim():t)},expression:"addForm.priceListCode"}},e._l(e.aluPriceList,function(e,t){return a("el-option",{key:t,attrs:{label:e.fcode,value:e.fcode}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{porp:"matCode",label:"物料分组"}},[a("el-input",{model:{value:e.addForm.matCode,callback:function(t){e.$set(e.addForm,"matCode",t)},expression:"addForm.matCode"}})],1),e._v(" "),a("el-form-item",{attrs:{porp:"matTypeName",label:"物料类型"}},[a("el-select",{on:{change:e.matType},model:{value:e.addForm.matTypeName,callback:function(t){e.$set(e.addForm,"matTypeName",t)},expression:"addForm.matTypeName"}},e._l(e.matTypeNameList,function(e,t){return a("el-option",{key:t,attrs:{label:e.fname,value:e.fname}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{porp:"matTypeCode",label:"物料代码"}},[a("el-input",{attrs:{readonly:!0},model:{value:e.addForm.matTypeCode,callback:function(t){e.$set(e.addForm,"matTypeCode",t)},expression:"addForm.matTypeCode"}})],1),e._v(" "),a("el-form-item",{attrs:{porp:"uom",label:"单位"}},[a("el-select",{model:{value:e.addForm.uom,callback:function(t){e.$set(e.addForm,"uom",t)},expression:"addForm.uom"}},e._l(e.uomList,function(e,t){return a("el-option",{key:t,attrs:{label:e.dictText,value:e.dictText}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{porp:"currency",label:"货币"}},[a("el-select",{on:{change:e.changeType},model:{value:e.addForm.currency,callback:function(t){e.$set(e.addForm,"currency",t)},expression:"addForm.currency"}},e._l(e.currentTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.dicttext,value:e.dicttext}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{porp:"beginDate",label:"生效日期"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.addForm.beginDate,callback:function(t){e.$set(e.addForm,"beginDate",t)},expression:"addForm.beginDate"}})],1),e._v(" "),a("el-form-item",{attrs:{porp:"endDate",label:"失效日期"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.addForm.endDate,callback:function(t){e.$set(e.addForm,"endDate",t)},expression:"addForm.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{porp:"price",label:"价格"}},[a("el-input",{model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{porp:"taxPrice",label:"含税价"}},[a("el-input",{model:{value:e.addForm.taxPrice,callback:function(t){e.$set(e.addForm,"taxPrice",t)},expression:"addForm.taxPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{porp:"memo",label:"备注"}},[a("el-input",{attrs:{type:"textare",row:2},model:{value:e.addForm.memo,callback:function(t){e.$set(e.addForm,"memo",t)},expression:"addForm.memo"}})],1)],1)],1)])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"el-icon-caret-right"})])}]}},739:function(e,t,a){function i(e){a(1498)}var l=a(1)(a(1197),a(1712),i,"data-v-9aa908bc",null);e.exports=l.exports}});
//# sourceMappingURL=107.aaba3f22facf78d07a10.js.map